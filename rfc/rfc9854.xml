<?xml version='1.0' encoding='utf-8'?>
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" version="3" category="std" docName="draft-ietf-roll-aodv-rpl-20" number="9854" updates="" obsoletes="" ipr="trust200902" submissionType="IETF" consensus="true" tocInclude="true" tocDepth="4" symRefs="true" sortRefs="true" xml:lang="en" prepTime="2025-10-29T16:31:48" indexInclude="true" scripts="Common,Latin">
  <link href="https://datatracker.ietf.org/doc/draft-ietf-roll-aodv-rpl-20" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9854" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <front>
    <title abbrev="AODV-RPL">AODV-RPL: The Routing Protocol for Low-Power and Lossy Networks (RPL) Based on Ad Hoc On-Demand Distance Vector (AODV) Routing</title>
    <seriesInfo name="RFC" value="9854" stream="IETF"/>
    <author fullname="Charles E. Perkins" initials="C.E." surname="Perkins">
      <organization showOnFrontPage="true">Blue Meadow Networks</organization>
      <address>
        <postal>
          <city>Saratoga</city>
          <region>CA</region>
          <code>95070</code>
          <country>United States of America</country>
        </postal>
        <email>charliep@lupinlodge.com</email>
      </address>
    </author>
    <author fullname="S.V.R. Anand" initials="S.V.R." surname="Anand">
      <organization showOnFrontPage="true">Indian Institute of Science</organization>
      <address>
        <postal>
          <city>Bangalore</city>
          <code>560012</code>
          <country>India</country>
        </postal>
        <email>anandsvr@iisc.ac.in</email>
      </address>
    </author>
    <author fullname="Satish Anamalamudi" initials="S." surname="Anamalamudi">
      <organization showOnFrontPage="true">SRM University-AP</organization>
      <address>
        <postal>
          <street>Amaravati Campus</street>
          <city>Amaravati, Andhra Pradesh</city>
          <code>522 502</code>
          <country>India</country>
        </postal>
        <email>satishnaidu80@gmail.com</email>
      </address>
    </author>
    <author fullname="Bing Liu" initials="B." surname="Liu">
      <organization showOnFrontPage="true">Huawei Technologies</organization>
      <address>
        <postal>
          <street>No. 156 Beiqing Rd.</street>
          <cityarea>Haidian District</cityarea>
          <city>Beijing</city>
          <code>100095</code>
          <country>China</country>
        </postal>
        <email>remy.liubing@huawei.com</email>
      </address>
    </author>
    <date month="10" year="2025"/>
    <area>RTG</area>
    <workgroup>roll</workgroup>
    <keyword>AODV</keyword>
    <keyword>Peer-to-Peer Route Discovery</keyword>
    <keyword>Asymmetric</keyword>
    <abstract pn="section-abstract">
      <t indent="0" pn="section-abstract-1">Route discovery for symmetric and asymmetric Peer-to-Peer (P2P)
      traffic flows is a desirable feature in Low-Power and Lossy Networks
      (LLNs).  For that purpose, this document specifies AODV-RPL -- the
      Routing Protocol for Low-Power and Lossy Networks (RPL) based on Ad hoc
      On-demand Distance Vector (AODV) routing. AODV-RPL is a reactive P2P
      route discovery mechanism for both hop-by-hop routes and source
      routing.  Paired instances are used to construct directional paths for
      cases where there are asymmetric links between source and target nodes.
      </t>
    </abstract>
    <boilerplate>
      <section anchor="status-of-memo" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.1">
        <name slugifiedName="name-status-of-this-memo">Status of This Memo</name>
        <t indent="0" pn="section-boilerplate.1-1">
            This is an Internet Standards Track document.
        </t>
        <t indent="0" pn="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.
        </t>
        <t indent="0" pn="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <eref target="https://www.rfc-editor.org/info/rfc9854" brackets="none"/>.
        </t>
      </section>
      <section anchor="copyright" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.2">
        <name slugifiedName="name-copyright-notice">Copyright Notice</name>
        <t indent="0" pn="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.
        </t>
        <t indent="0" pn="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<eref target="https://trustee.ietf.org/license-info" brackets="none"/>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.
        </t>
      </section>
    </boilerplate>
    <toc>
      <section anchor="toc" numbered="false" removeInRFC="false" toc="exclude" pn="section-toc.1">
        <name slugifiedName="name-table-of-contents">Table of Contents</name>
        <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1">
          <li pn="section-toc.1-1.1">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.1"><xref derivedContent="1" format="counter" sectionFormat="of" target="section-1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-introduction">Introduction</xref></t>
          </li>
          <li pn="section-toc.1-1.2">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.2.1"><xref derivedContent="2" format="counter" sectionFormat="of" target="section-2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-terminology">Terminology</xref></t>
          </li>
          <li pn="section-toc.1-1.3">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.3.1"><xref derivedContent="3" format="counter" sectionFormat="of" target="section-3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-overview-of-aodv-rpl">Overview of AODV-RPL</xref></t>
          </li>
          <li pn="section-toc.1-1.4">
            <t indent="0" pn="section-toc.1-1.4.1"><xref derivedContent="4" format="counter" sectionFormat="of" target="section-4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-aodv-rpl-dio-options">AODV-RPL DIO Options</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2">
              <li pn="section-toc.1-1.4.2.1">
                <t indent="0" pn="section-toc.1-1.4.2.1.1"><xref derivedContent="4.1" format="counter" sectionFormat="of" target="section-4.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-aodv-rpl-rreq-option">AODV-RPL RREQ Option</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.2">
                <t indent="0" pn="section-toc.1-1.4.2.2.1"><xref derivedContent="4.2" format="counter" sectionFormat="of" target="section-4.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-aodv-rpl-rrep-option">AODV-RPL RREP Option</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.3">
                <t indent="0" pn="section-toc.1-1.4.2.3.1"><xref derivedContent="4.3" format="counter" sectionFormat="of" target="section-4.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-aodv-rpl-target-option">AODV-RPL Target Option</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.5">
            <t indent="0" pn="section-toc.1-1.5.1"><xref derivedContent="5" format="counter" sectionFormat="of" target="section-5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-symmetric-and-asymmetric-ro">Symmetric and Asymmetric Routes</xref></t>
          </li>
          <li pn="section-toc.1-1.6">
            <t indent="0" pn="section-toc.1-1.6.1"><xref derivedContent="6" format="counter" sectionFormat="of" target="section-6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-aodv-rpl-operation">AODV-RPL Operation</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.6.2">
              <li pn="section-toc.1-1.6.2.1">
                <t indent="0" pn="section-toc.1-1.6.2.1.1"><xref derivedContent="6.1" format="counter" sectionFormat="of" target="section-6.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-generating-rreq">Generating RREQ</xref></t>
              </li>
              <li pn="section-toc.1-1.6.2.2">
                <t indent="0" pn="section-toc.1-1.6.2.2.1"><xref derivedContent="6.2" format="counter" sectionFormat="of" target="section-6.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-receiving-and-forwarding-rr">Receiving and Forwarding RREQ Messages</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.6.2.2.2">
                  <li pn="section-toc.1-1.6.2.2.2.1">
                    <t indent="0" pn="section-toc.1-1.6.2.2.2.1.1"><xref derivedContent="6.2.1" format="counter" sectionFormat="of" target="section-6.2.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-1-rreq-reception-and-e">Step 1: RREQ Reception and Evaluation</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.2.2.2">
                    <t indent="0" pn="section-toc.1-1.6.2.2.2.2.1"><xref derivedContent="6.2.2" format="counter" sectionFormat="of" target="section-6.2.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-2-targnode-and-interme">Step 2: TargNode and Intermediate Router Determination</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.2.2.3">
                    <t indent="0" pn="section-toc.1-1.6.2.2.2.3.1"><xref derivedContent="6.2.3" format="counter" sectionFormat="of" target="section-6.2.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-3-intermediate-router-">Step 3: Intermediate Router RREQ Processing</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.2.2.4">
                    <t indent="0" pn="section-toc.1-1.6.2.2.2.4.1"><xref derivedContent="6.2.4" format="counter" sectionFormat="of" target="section-6.2.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-4-symmetric-route-proc">Step 4: Symmetric Route Processing at an Intermediate Router</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.2.2.5">
                    <t indent="0" pn="section-toc.1-1.6.2.2.2.5.1"><xref derivedContent="6.2.5" format="counter" sectionFormat="of" target="section-6.2.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-5-rreq-propagation-at-">Step 5: RREQ Propagation at an Intermediate Router</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.2.2.6">
                    <t indent="0" pn="section-toc.1-1.6.2.2.2.6.1"><xref derivedContent="6.2.6" format="counter" sectionFormat="of" target="section-6.2.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-6-rreq-reception-at-ta">Step 6: RREQ Reception at TargNode</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.6.2.3">
                <t indent="0" pn="section-toc.1-1.6.2.3.1"><xref derivedContent="6.3" format="counter" sectionFormat="of" target="section-6.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-generating-rrep-at-targnode">Generating RREP at TargNode</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.6.2.3.2">
                  <li pn="section-toc.1-1.6.2.3.2.1">
                    <t indent="0" pn="section-toc.1-1.6.2.3.2.1.1"><xref derivedContent="6.3.1" format="counter" sectionFormat="of" target="section-6.3.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-rrep-dio-for-symmetric-rout">RREP-DIO for Symmetric Route</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.3.2.2">
                    <t indent="0" pn="section-toc.1-1.6.2.3.2.2.1"><xref derivedContent="6.3.2" format="counter" sectionFormat="of" target="section-6.3.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-rrep-dio-for-asymmetric-rou">RREP-DIO for Asymmetric Route</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.3.2.3">
                    <t indent="0" pn="section-toc.1-1.6.2.3.2.3.1"><xref derivedContent="6.3.3" format="counter" sectionFormat="of" target="section-6.3.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-rplinstanceid-pairing">RPLInstanceID Pairing</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.6.2.4">
                <t indent="0" pn="section-toc.1-1.6.2.4.1"><xref derivedContent="6.4" format="counter" sectionFormat="of" target="section-6.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-receiving-and-forwarding-rre">Receiving and Forwarding RREP</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.6.2.4.2">
                  <li pn="section-toc.1-1.6.2.4.2.1">
                    <t indent="0" pn="section-toc.1-1.6.2.4.2.1.1"><xref derivedContent="6.4.1" format="counter" sectionFormat="of" target="section-6.4.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-1-receiving-and-evalua">Step 1: Receiving and Evaluation</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.4.2.2">
                    <t indent="0" pn="section-toc.1-1.6.2.4.2.2.1"><xref derivedContent="6.4.2" format="counter" sectionFormat="of" target="section-6.4.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-2-orignode-or-intermed">Step 2: OrigNode or Intermediate Router</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.4.2.3">
                    <t indent="0" pn="section-toc.1-1.6.2.4.2.3.1"><xref derivedContent="6.4.3" format="counter" sectionFormat="of" target="section-6.4.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-3-build-route-to-targn">Step 3: Build Route to TargNode</xref></t>
                  </li>
                  <li pn="section-toc.1-1.6.2.4.2.4">
                    <t indent="0" pn="section-toc.1-1.6.2.4.2.4.1"><xref derivedContent="6.4.4" format="counter" sectionFormat="of" target="section-6.4.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-4-rrep-propagation">Step 4: RREP Propagation</xref></t>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.7">
            <t indent="0" pn="section-toc.1-1.7.1"><xref derivedContent="7" format="counter" sectionFormat="of" target="section-7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-gratuitous-rrep">Gratuitous RREP</xref></t>
          </li>
          <li pn="section-toc.1-1.8">
            <t indent="0" pn="section-toc.1-1.8.1"><xref derivedContent="8" format="counter" sectionFormat="of" target="section-8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-operation-of-trickle-timer">Operation of Trickle Timer</xref></t>
          </li>
          <li pn="section-toc.1-1.9">
            <t indent="0" pn="section-toc.1-1.9.1"><xref derivedContent="9" format="counter" sectionFormat="of" target="section-9"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-iana-considerations">IANA Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.10">
            <t indent="0" pn="section-toc.1-1.10.1"><xref derivedContent="10" format="counter" sectionFormat="of" target="section-10"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-security-considerations">Security Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.11">
            <t indent="0" pn="section-toc.1-1.11.1"><xref derivedContent="11" format="counter" sectionFormat="of" target="section-11"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-references">References</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.11.2">
              <li pn="section-toc.1-1.11.2.1">
                <t indent="0" pn="section-toc.1-1.11.2.1.1"><xref derivedContent="11.1" format="counter" sectionFormat="of" target="section-11.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-normative-references">Normative References</xref></t>
              </li>
              <li pn="section-toc.1-1.11.2.2">
                <t indent="0" pn="section-toc.1-1.11.2.2.1"><xref derivedContent="11.2" format="counter" sectionFormat="of" target="section-11.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-informative-references">Informative References</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.12">
            <t indent="0" pn="section-toc.1-1.12.1"><xref derivedContent="Appendix A" format="default" sectionFormat="of" target="section-appendix.a"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-using-etx-rssi-valu">Example: Using ETX/RSSI Values to Determine Value of S Bit</xref></t>
          </li>
          <li pn="section-toc.1-1.13">
            <t indent="0" pn="section-toc.1-1.13.1"><xref derivedContent="Appendix B" format="default" sectionFormat="of" target="section-appendix.b"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-some-example-aodv-rpl-messa">Some Example AODV-RPL Message Flows</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.13.2">
              <li pn="section-toc.1-1.13.2.1">
                <t indent="0" pn="section-toc.1-1.13.2.1.1"><xref derivedContent="B.1" format="counter" sectionFormat="of" target="section-appendix.b.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-control-message-flo">Example Control Message Flows in Symmetric and Asymmetric Networks</xref></t>
              </li>
              <li pn="section-toc.1-1.13.2.2">
                <t indent="0" pn="section-toc.1-1.13.2.2.1"><xref derivedContent="B.2" format="counter" sectionFormat="of" target="section-appendix.b.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-rrep_wait-handling">Example RREP_WAIT Handling</xref></t>
              </li>
              <li pn="section-toc.1-1.13.2.3">
                <t indent="0" pn="section-toc.1-1.13.2.3.1"><xref derivedContent="B.3" format="counter" sectionFormat="of" target="section-appendix.b.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-g-rrep-handling">Example G-RREP Handling</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.14">
            <t indent="0" pn="section-toc.1-1.14.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.c"/><xref derivedContent="" format="title" sectionFormat="of" target="name-acknowledgements">Acknowledgements</xref></t>
          </li>
          <li pn="section-toc.1-1.15">
            <t indent="0" pn="section-toc.1-1.15.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.d"/><xref derivedContent="" format="title" sectionFormat="of" target="name-contributors">Contributors</xref></t>
          </li>
          <li pn="section-toc.1-1.16">
            <t indent="0" pn="section-toc.1-1.16.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.e"/><xref derivedContent="" format="title" sectionFormat="of" target="name-authors-addresses">Authors' Addresses</xref></t>
          </li>
        </ul>
      </section>
    </toc>
  </front>
  <middle>
    <section anchor="Introduction" numbered="true" removeInRFC="false" toc="include" pn="section-1">
      <name slugifiedName="name-introduction">Introduction</name>
      <t indent="0" pn="section-1-1">
        The Routing Protocol for Low-Power and Lossy Networks (RPL)
        <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/> is an IPv6 distance vector routing protocol
	designed to support multiple traffic flows through a root-based
	Destination-Oriented Directed Acyclic Graph (DODAG). Typically,
	a router does not have routing information for destinations attached
        to most other routers.  Consequently, for traffic
        between routers within the DODAG (i.e., P2P traffic),
        data packets either have to traverse the root in non-storing mode or
        traverse a common ancestor in storing mode.  Such P2P traffic
        is thereby likely to traverse longer routes and
        may suffer severe congestion near the root (for more information,
        see <xref target="RFC6687" format="default" sectionFormat="of" derivedContent="RFC6687"/>, <xref target="RFC6997" format="default" sectionFormat="of" derivedContent="RFC6997"/>,
        <xref target="RFC6998" format="default" sectionFormat="of" derivedContent="RFC6998"/>, and <xref target="RFC9010" format="default" sectionFormat="of" derivedContent="RFC9010"/>).
        The network environment that is considered in this document
        is assumed to be the same as that described in 
        <xref target="RFC6550" sectionFormat="of" section="1" format="default" derivedLink="https://rfc-editor.org/rfc/rfc6550#section-1" derivedContent="RFC6550"/>.
        Each radio interface/link and the associated address should be
        treated as an independent intermediate router.  Such routers
        have different links, and the rules for link symmetry
        apply independently for each of these.

      </t>
      <t indent="0" pn="section-1-2">
        The route discovery process in AODV-RPL is modeled on the analogous
        P2P procedure specified in AODV <xref target="RFC3561" format="default" sectionFormat="of" derivedContent="RFC3561"/>.
	The on-demand property of AODV route discovery is useful for the needs
        of routing in RPL-based LLNs when routes are needed but aren't yet
        established.  P2P routing is desirable to discover
        shorter routes, especially when it is desired to avoid directing
        additional traffic through a root or gateway node of the network.
        It may happen that some routes need to be established proactively
        when known beforehand and when AODV-RPL's route discovery process
        introduces unwanted delay when the application is
        launched.
      </t>
      <t indent="0" pn="section-1-3">
        AODV terminology has been adapted for use with AODV-RPL messages,
        namely "RREQ" for "Route Request", and "RREP" for "Route Reply".
        AODV-RPL currently omits some features compared to AODV -- in
        particular, flagging route errors, blocking the use of unidirectional links
        <xref target="RFC3561" format="default" sectionFormat="of" derivedContent="RFC3561"/>, multihoming, and handling unnumbered
        interfaces.
      </t>
      <t indent="0" pn="section-1-4">AODV-RPL reuses and extends the core RPL functionality to support
      routes with bidirectional asymmetric links.  It retains RPL's DODAG
      formation, RPL Instance and the associated Objective Function (OF) (defined
      in <xref target="RFC6551" format="default" sectionFormat="of" derivedContent="RFC6551"/>), Trickle timers, and support for storing
      and non-storing modes.  AODV-RPL adds the basic messages RREQ and RREP as
      part of the RPL DODAG Information Object (DIO) control message, which go in
      separate (paired) RPL Instances.  AODV-RPL does not utilize the
      Destination Advertisement Object (DAO) control message of RPL.
        AODV-RPL uses the "P2P Route Discovery Mode of Operation" (MOP == 4)
        with three new options for the DIO message, dedicated to discovering
        P2P routes. These P2P routes may differ from routes discoverable by
        RPL <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.  Since AODV-RPL uses newly defined options and a newly
        allocated multicast group (see <xref target="iana" format="default" sectionFormat="of" derivedContent="Section 9"/>), there is no
        conflict with P2P-RPL <xref target="RFC6997" format="default" sectionFormat="of" derivedContent="RFC6997"/>, a previous document
        using the same MOP.  AODV-RPL can be operated whether or not P2P-RPL
        or RPL <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/> is also running.  AODV-RPL could be used for networks in
        which routes are needed with OFs that cannot be
        satisfied by routes that are constrained to traverse the root of the
        network or other common ancestors.  P2P routes often require fewer
        hops and therefore consume less resources than routes that traverse
        the root or other common ancestors.  Similar in cost to base RPL <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>, the cost will depend on many
        factors such as the proximity of the OrigNode and TargNodes and
        distribution of symmetric/asymmetric P2P links.  Experience with
        AODV <xref target="aodv-tot" format="default" sectionFormat="of" derivedContent="aodv-tot"/> suggests that AODV-RPL will often find
        routes with improved Rank compared to routes constrained to traverse
        a common ancestor of the source and destination nodes.
      </t>
    </section>
    <section anchor="terms" numbered="true" removeInRFC="false" toc="include" pn="section-2">
      <name slugifiedName="name-terminology">Terminology</name>
      <t indent="0" pn="section-2-1">
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>",
    "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>",
    "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>",
    "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be
    interpreted as described in BCP 14 <xref target="RFC2119" format="default" sectionFormat="of" derivedContent="RFC2119"/> <xref target="RFC8174" format="default" sectionFormat="of" derivedContent="RFC8174"/> when, and only when, they appear in all capitals, as
    shown here.
      </t>
      <t indent="0" pn="section-2-2">
          AODV-RPL reuses names for messages and data structures, including
          Rank, DODAG, and DODAGID, as defined in RPL <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.
      </t>
      <t indent="0" pn="section-2-3">This document also uses the following terms:</t>
      <dl newline="true" spacing="normal" indent="3" pn="section-2-4">
        <dt pn="section-2-4.1">AODV</dt>
        <dd pn="section-2-4.2">Ad hoc On-Demand Distance Vector <xref target="RFC3561" format="default" sectionFormat="of" derivedContent="RFC3561"/>.</dd>
        <dt pn="section-2-4.3">ART option</dt>
        <dd pn="section-2-4.4">The AODV-RPL Target option defined in this document.</dd>
        <dt pn="section-2-4.5">Asymmetric route</dt>
        <dd pn="section-2-4.6">The route from the OrigNode to the TargNode can traverse different
        nodes than the route from the TargNode to the OrigNode. An asymmetric
        route may result from the asymmetry of links, such that only one
        direction of the series of links satisfies the OF
        during route discovery.</dd>
        <dt pn="section-2-4.7">Bidirectional asymmetric link</dt>
        <dd pn="section-2-4.8">A link that can be used in both directions but with different link
        characteristics.</dd>
        <dt pn="section-2-4.9">DIO</dt>
        <dd pn="section-2-4.10">DODAG Information Object (as defined in <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>).</dd>
        <dt pn="section-2-4.11">DODAG RREQ-Instance (or simply RREQ-Instance)</dt>
        <dd pn="section-2-4.12">A RPL Instance built using the DIO with RREQ option; used for
        transmission of control messages from OrigNode to TargNode, thus
        enabling data transmission from TargNode to OrigNode.</dd>
        <dt pn="section-2-4.13">DODAG RREP-Instance (or simply RREP-Instance)</dt>
        <dd pn="section-2-4.14">A RPL Instance built using the DIO with RREP option; used for
        transmission of control messages from TargNode to OrigNode, thus
        enabling data transmission from OrigNode to TargNode. </dd>
        <dt pn="section-2-4.15">Downward direction</dt>
        <dd pn="section-2-4.16">The direction from the OrigNode to the TargNode.</dd>
        <dt pn="section-2-4.17">Downward route</dt>
        <dd pn="section-2-4.18">A route in the downward direction.</dd>
        <dt pn="section-2-4.19">Hop-by-hop route</dt>
        <dd pn="section-2-4.20">A route for which each router along the routing path stores
        routing information about the next hop. A hop-by-hop route is
        created using RPL's "storing mode".</dd>
        <dt pn="section-2-4.21">OF</dt>
        <dd pn="section-2-4.22">Objective Function (as defined in <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>).</dd>
        <dt pn="section-2-4.23">OrigNode</dt>
        <dd pn="section-2-4.24">The IPv6 router (originating node) initiating the AODV-RPL
        route discovery to obtain a route to TargNode. </dd>
        <dt pn="section-2-4.25">Paired DODAGs</dt>
        <dd pn="section-2-4.26">Two DODAGs for a single route discovery process between OrigNode
        and TargNode.</dd>
        <dt pn="section-2-4.27">P2P</dt>
        <dd pn="section-2-4.28">Peer-to-Peer (in other words, not constrained a priori to
        traverse a common ancestor).</dd>
        <dt pn="section-2-4.29">REJOIN_REENABLE</dt>
        <dd pn="section-2-4.30">The duration during which a node is prohibited from joining a
        DODAG with a particular RREQ-InstanceID, after it has left a DODAG
        with the same RREQ-InstanceID. The default value of REJOIN_REENABLE is
        15 minutes.</dd>
        <dt pn="section-2-4.31">RREQ</dt>
        <dd pn="section-2-4.32">Route Request.</dd>
        <dt pn="section-2-4.33">RREQ-DIO message</dt>
        <dd pn="section-2-4.34">A DIO message containing the RREQ option.  The RPLInstanceID in
        RREQ-DIO is assigned locally by the OrigNode.  The RREQ-DIO message
        has a secure variant as noted in <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.</dd>
        <dt pn="section-2-4.35">RREQ-InstanceID</dt>
        <dd pn="section-2-4.36">The RPLInstanceID for the RREQ-Instance. The RREQ-InstanceID is formed
        as the ordered pair (Orig_RPLInstanceID, OrigNode-IPaddr), where
        Orig_RPLInstanceID is the local RPLInstanceID allocated by OrigNode
        and OrigNode-IPaddr is an IP address of OrigNode.  The RREQ-InstanceID
        uniquely identifies the RREQ-Instance.  </dd>
        <dt pn="section-2-4.37">RREP</dt>
        <dd pn="section-2-4.38">Route Reply.</dd>
        <dt pn="section-2-4.39">RREP-DIO message</dt>
        <dd pn="section-2-4.40">A DIO message containing the RREP option.  OrigNode pairs the
        RPLInstanceID in RREP-DIO to the one in the associated RREQ-DIO
        message (i.e., the RREQ-InstanceID) as described in <xref target="asymmetricrrep" format="default" sectionFormat="of" derivedContent="Section 6.3.2"/>. The RREP-DIO message has a secure variant
        as noted in <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.</dd>
        <dt pn="section-2-4.41">RREP-InstanceID</dt>
        <dd pn="section-2-4.42">
        The RPLInstanceID for the RREP-Instance.  The RREP-InstanceID is formed
        as the ordered pair (Targ_RPLInstanceID, TargNode-IPaddr), where
        Targ_RPLInstanceID is the local RPLInstanceID allocated by TargNode
        and TargNode-IPaddr is an IP address of TargNode.  The RREP-InstanceID
        uniquely identifies the RREP-Instance.  The RPLInstanceID in the RREP
        message along with the Delta value indicates the associated
        RREQ-InstanceID.  The InstanceIDs are matched by the mechanism explained
        in <xref target="instancepairing" format="default" sectionFormat="of" derivedContent="Section 6.3.3"/>.</dd>
        <dt pn="section-2-4.43">Source routing</dt>
        <dd pn="section-2-4.44">A mechanism by which the source supplies a vector of addresses
        towards the destination node along with each data packet <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.</dd>
        <dt pn="section-2-4.45">Symmetric route</dt>
        <dd pn="section-2-4.46">The upstream and downstream routes traverse the same routers and over
        the same links.</dd>
        <dt pn="section-2-4.47">TargNode</dt>
        <dd pn="section-2-4.48">The IPv6 router (target node) for which OrigNode requires a
        route and initiates route discovery within the LLN. </dd>
        <dt pn="section-2-4.49">Upward direction</dt>
        <dd pn="section-2-4.50">The direction from the TargNode to the OrigNode.</dd>
        <dt pn="section-2-4.51">Upward route</dt>
        <dd pn="section-2-4.52">A route in the upward direction.</dd>
      </dl>
    </section>
    <section numbered="true" removeInRFC="false" toc="include" pn="section-3">
      <name slugifiedName="name-overview-of-aodv-rpl">Overview of AODV-RPL</name>
      <t indent="0" pn="section-3-1">
        With AODV-RPL, routes from OrigNode to TargNode within the LLN
        do not become established until they are needed.  The route
        discovery mechanism in AODV-RPL is invoked when OrigNode
        has data for delivery to a TargNode, but existing routes do not
        satisfy the application's requirements.  For this reason,
        AODV-RPL is considered to be an example of an "on-demand" routing
        protocol.  Such protocols are also known as "reactive" routing
        protocols since their operations are triggered in reaction to
        a determination that a new route is needed.

        AODV-RPL works
        without requiring the use of RPL or any other routing protocol.
      </t>
      <t indent="0" pn="section-3-2">
        The routes discovered by
        AODV-RPL are not constrained to traverse a common ancestor.
        AODV-RPL can enable asymmetric communication paths in networks with
        bidirectional asymmetric links. For this purpose, AODV-RPL enables
        discovery of two routes: namely, one from OrigNode to TargNode and
        another from TargNode to OrigNode.  AODV-RPL also
        enables discovery of symmetric routes along paired DODAGs, when
        symmetric routes are possible (see <xref target="channel" format="default" sectionFormat="of" derivedContent="Section 5"/>).
      </t>
      <t indent="0" pn="section-3-3">
        In AODV-RPL, routes are discovered by first forming a temporary
        Directed Acyclic Graph (DAG) rooted at the OrigNode.  Paired DODAGs
        (Instances) are constructed during route formation between the
        OrigNode and TargNode.  The RREQ-Instance is formed by route control
        messages from OrigNode to TargNode, whereas the RREP-Instance is
        formed by route control messages from TargNode to OrigNode.  The route
        discovered in the RREQ-Instance is used for transmitting data from
        TargNode to OrigNode, and the route discovered in RREP-Instance is
        used for transmitting data from OrigNode to TargNode.
      </t>
      <t indent="0" pn="section-3-4">
        Intermediate routers join the DODAGs based on the Rank
        <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/> as calculated from the DIO messages.
        AODV-RPL uses the same notion of Rank as
        defined in <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>:</t>
      <blockquote pn="section-3-5">The Rank is the expression of a relative position within
	a DODAG Version with regard to neighbors, and it is not necessarily a
	good indication or a proper expression of a distance or a path cost to
	the root.</blockquote>
      <t indent="0" pn="section-3-6">The Rank measurements provided in AODV messages do not indicate a
	distance or a path cost to the root.
      </t>
      <t indent="0" pn="section-3-7">
        Henceforth in this document, "RREQ-DIO message" means the DIO
	message from OrigNode toward TargNode, containing the RREQ option as
	specified in <xref target="RREQmsg" format="default" sectionFormat="of" derivedContent="Section 4.1"/>.  The RREQ-InstanceID is formed
	as the ordered pair (Orig_RPLInstanceID, OrigNode-IPaddr), where
	Orig_RPLInstanceID is the local RPLInstanceID allocated by OrigNode
	and OrigNode-IPaddr is the IP address of OrigNode.  A node receiving
	the RREQ-DIO can use the RREQ-InstanceID to identify the proper OF
	whenever that node receives a data packet with Source Address ==
	OrigNode-IPaddr and IPv6 RPL Option having the RPLInstanceID ==
	Orig_RPLInstanceID.  The D bit of the RPLInstanceID field is set
        to 0 to indicate that the source address of the IPv6 packet is
        the DODAGID.
      </t>
      <t indent="0" pn="section-3-8">
	Similarly, "RREP-DIO message" means the DIO message from TargNode
	toward OrigNode, containing the RREP option as specified in
	<xref target="RREPmsg" format="default" sectionFormat="of" derivedContent="Section 4.2"/>.  The RREP-InstanceID is formed
	as the ordered pair (Targ_RPLInstanceID, TargNode-IPaddr), where
	Targ_RPLInstanceID is the local RPLInstanceID allocated by TargNode
	and TargNode-IPaddr is the IP address of TargNode.  A node receiving
	the RREP-DIO can use the RREP-InstanceID to identify the proper OF
	whenever that node receives a data packet with Source Address ==
	TargNode-IPaddr and IPv6 RPL Option having the RPLInstanceID ==
	Targ_RPLInstanceID along with D == 0 as above.
      </t>
    </section>
    <section anchor="Options" numbered="true" removeInRFC="false" toc="include" pn="section-4">
      <name slugifiedName="name-aodv-rpl-dio-options">AODV-RPL DIO Options</name>
      <section anchor="RREQmsg" numbered="true" removeInRFC="false" toc="include" pn="section-4.1">
        <name slugifiedName="name-aodv-rpl-rreq-option">AODV-RPL RREQ Option</name>
        <t indent="0" pn="section-4.1-1">
	OrigNode selects one of its IPv6 addresses and sets it in the DODAGID
	field of the RREQ-DIO message.  The address scope of the selected
	address <bcp14>MUST</bcp14> encompass the domain where the route is built (e.g, not
	link-local); otherwise, the route discovery will fail.  Exactly one
        RREQ option <bcp14>MUST</bcp14> be present
	in an RREQ-DIO message; otherwise, the message <bcp14>MUST</bcp14> be dropped.
        </t>
        <figure anchor="figRREQ" align="left" suppress-title="false" pn="figure-1">
          <name slugifiedName="name-format-for-aodv-rpl-rreq-op">Format for AODV-RPL RREQ Option</name>
          <artwork align="center" pn="section-4.1-2.1">
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Option Type  | Option Length |S|H|X| Compr | L |  RankLimit  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Orig SeqNo   |                                               |
    +-+-+-+-+-+-+-+-+                                               |
    |                                                               |
    |           Address Vector (Optional, Variable Length)          |
    .                                                               .
    .                                                               .
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ . . .</artwork>
        </figure>
        <t indent="0" pn="section-4.1-3">OrigNode supplies the following information in the RREQ option: </t>
        <dl newline="true" spacing="normal" indent="3" pn="section-4.1-4">
          <dt pn="section-4.1-4.1">Option Type</dt>
          <dd pn="section-4.1-4.2">8-bit unsigned integer specifying the type of the option (0x0B).</dd>
          <dt pn="section-4.1-4.3">Option Length</dt>
          <dd pn="section-4.1-4.4">8-bit unsigned integer specifying the length of the option in
          octets, excluding the Option Type and Option Length fields.  It is
          variable due to the presence of the Address Vector and the number of
          octets elided according to the Compr value.</dd>
          <dt pn="section-4.1-4.5">S</dt>
          <dd pn="section-4.1-4.6">Symmetric bit indicating a symmetric route from the OrigNode to
          the router transmitting this RREQ-DIO. See <xref target="channel" format="default" sectionFormat="of" derivedContent="Section 5"/>.</dd>
          <dt pn="section-4.1-4.7">H</dt>
          <dd pn="section-4.1-4.8">Set to one for a hop-by-hop route.  Set to zero for a source
          route.  This flag controls both the downstream route and upstream
          route.</dd>
          <dt pn="section-4.1-4.9">X</dt>
          <dd pn="section-4.1-4.10">Reserved. This field <bcp14>MUST</bcp14> be initialized to zero and ignored
          upon reception.</dd>
          <dt pn="section-4.1-4.11">Compr</dt>
          <dd pn="section-4.1-4.12">4-bit unsigned integer. When Compr is nonzero, exactly that
          number of prefix octets <bcp14>MUST</bcp14> be elided from each
          address before storing it in the Address Vector. The octets elided
          are shared with the IPv6 address in the DODAGID. This field is only
          used in source routing mode (H=0).  In hop-by-hop mode (H=1), this
          field <bcp14>MUST</bcp14> be set to zero and ignored upon
          reception.</dd>
          <dt pn="section-4.1-4.13">L</dt>
          <dd pn="section-4.1-4.14">
            <t indent="0" pn="section-4.1-4.14.1">2-bit unsigned integer determining the time duration that a
            node is able to belong to the RREQ-Instance (a temporary DAG
            including the OrigNode and the TargNode).  Once the time is
            reached, a node <bcp14>SHOULD</bcp14> leave the RREQ-Instance and
            stop sending or receiving any more DIOs for the RREQ-Instance;
            otherwise, memory and network resources are likely to be consumed
            unnecessarily.  This naturally depends on the node's ability to
            keep track of time.  Once a node leaves an RREQ-Instance, it
            <bcp14>MUST NOT</bcp14> rejoin the same RREQ-Instance for at least
            the time interval specified by the configuration variable
            REJOIN_REENABLE. L is independent from the route lifetime, which
            is defined in the DODAG configuration option.
            </t>
            <ul spacing="compact" bare="false" empty="false" indent="3" pn="section-4.1-4.14.2">
              <li pn="section-4.1-4.14.2.1">
                <t indent="0" pn="section-4.1-4.14.2.1.1">0x00: No time limit imposed</t>
              </li>
              <li pn="section-4.1-4.14.2.2">
                <t indent="0" pn="section-4.1-4.14.2.2.1">0x01: 16 seconds</t>
              </li>
              <li pn="section-4.1-4.14.2.3">
                <t indent="0" pn="section-4.1-4.14.2.3.1">0x02: 64 seconds</t>
              </li>
              <li pn="section-4.1-4.14.2.4">
                <t indent="0" pn="section-4.1-4.14.2.4.1">0x03: 256 seconds</t>
              </li>
            </ul>
            <t indent="0" pn="section-4.1-4.14.3">
            </t>
          </dd>
          <dt pn="section-4.1-4.15">RankLimit</dt>
          <dd pn="section-4.1-4.16">8-bit unsigned integer specifying the upper limit on the integer
          portion of the Rank (calculated using the DAGRank() macro defined in
          <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>).  A value of 0 in this field indicates the
          limit is infinity.</dd>
          <dt pn="section-4.1-4.17">Orig SeqNo</dt>
          <dd pn="section-4.1-4.18">8-bit unsigned integer specifying the Sequence Number of
          OrigNode.  See <xref target="rreq" format="default" sectionFormat="of" derivedContent="Section 6.1"/>.</dd>
          <dt pn="section-4.1-4.19">Address Vector</dt>
          <dd pn="section-4.1-4.20">A vector of IPv6 addresses representing the route that the
          RREQ-DIO has passed. It is only present when the H bit is set to 0.
          The prefix of each address is elided according to the Compr
          field.</dd>
        </dl>
        <t indent="0" pn="section-4.1-5">TargNode can join the RREQ-Instance at a Rank whose integer portion is
	less than or equal to the RankLimit.  Any other node <bcp14>MUST NOT</bcp14> join an
	RREQ-Instance if its own Rank would be equal to or higher than the
	RankLimit.  A router <bcp14>MUST</bcp14> discard a received RREQ if the integer part
	of the advertised Rank equals or exceeds the RankLimit.</t>
      </section>
      <section anchor="RREPmsg" numbered="true" removeInRFC="false" toc="include" pn="section-4.2">
        <name slugifiedName="name-aodv-rpl-rrep-option">AODV-RPL RREP Option</name>
        <t indent="0" pn="section-4.2-1">
	TargNode sets one of its IPv6 addresses in the DODAGID
	field of the RREP-DIO message.  The address scope of the selected
	address must encompass the domain where the route is built (e.g, not
	link-local).   Exactly one RREP option <bcp14>MUST</bcp14> be present
	in an RREP-DIO message, otherwise, the message <bcp14>MUST</bcp14> be dropped.
	TargNode supplies the following information in the RREP option:
        </t>
        <figure anchor="figRREP" align="left" suppress-title="false" pn="figure-2">
          <name slugifiedName="name-format-for-aodv-rpl-rrep-op">Format for AODV-RPL RREP Option</name>
          <artwork align="center" pn="section-4.2-2.1">
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Option Type  | Option Length |G|H|X| Compr | L |  RankLimit  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   Delta   |X X|                                               |
   +-+-+-+-+-+-+-+-+                                               |
   |                                                               |
   |                                                               |
   |           Address Vector (Optional, Variable Length)          |
   .                                                               .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ . . .</artwork>
        </figure>
        <dl newline="true" spacing="normal" indent="3" pn="section-4.2-3">
          <dt pn="section-4.2-3.1">Option Type</dt>
          <dd pn="section-4.2-3.2">8-bit unsigned integer specifying the type of the option (0x0C).</dd>
          <dt pn="section-4.2-3.3">Option Length</dt>
          <dd pn="section-4.2-3.4">8-bit unsigned integer specifying the length of the option in
          octets, excluding the Option Type and Option Length fields.  It is
          variable due to the presence of the Address Vector and the number of
          octets elided according to the Compr value.</dd>
          <dt pn="section-4.2-3.5">G</dt>
          <dd pn="section-4.2-3.6">Gratuitous RREP (see <xref target="G-RREP" format="default" sectionFormat="of" derivedContent="Section 7"/>).</dd>
          <dt pn="section-4.2-3.7">H</dt>
          <dd pn="section-4.2-3.8">The H bit in the RREP option <bcp14>MUST</bcp14> be set to be
          the same as the H bit in the RREQ option.  It requests either source
          routing (H=0) or hop-by-hop (H=1) for the downstream route.</dd>
          <dt pn="section-4.2-3.9">X</dt>
          <dd pn="section-4.2-3.10">1-bit Reserved field. This field <bcp14>MUST</bcp14> be initialized to zero
          and ignored upon reception.</dd>
          <dt pn="section-4.2-3.11">Compr</dt>
          <dd pn="section-4.2-3.12">4-bit unsigned integer. This field has the same definition as in the RREQ option.</dd>
          <dt pn="section-4.2-3.13">L</dt>
          <dd pn="section-4.2-3.14">2-bit unsigned integer defined as in the RREQ option.  The lifetime
          of the RREP-Instance <bcp14>SHOULD</bcp14> be no greater than the
          lifetime of the RREQ-Instance to which it is paired, so that the
          memory required to store the RREP-Instance can be reclaimed when no
          longer needed.</dd>
          <dt pn="section-4.2-3.15">RankLimit</dt>
          <dd pn="section-4.2-3.16">8-bit unsigned integer specifying the upper limit on the integer
          portion of the Rank, similarly to RankLimit in the RREQ message.  A
          value of 0 in this field indicates the limit is infinity.</dd>
          <dt pn="section-4.2-3.17">Delta</dt>
          <dd pn="section-4.2-3.18">6-bit unsigned integer. TargNode uses the Delta field so that
          nodes receiving its RREP message can identify the RREQ-InstanceID of
          the RREQ message that triggered the transmission of the RREP (see
          <xref target="instancepairing" format="default" sectionFormat="of" derivedContent="Section 6.3.3"/>).</dd>
          <dt pn="section-4.2-3.19">X X</dt>
          <dd pn="section-4.2-3.20">2-bit Reserved field. This field <bcp14>MUST</bcp14> be initialized to zero
          and ignored upon reception.</dd>
          <dt pn="section-4.2-3.21">Address Vector</dt>
          <dd pn="section-4.2-3.22">
	    Only present when the H bit is set to 0. The prefix of each address
	    is elided according to the Compr field.  For an asymmetric route,
	    the Address Vector represents the IPv6 addresses of the path
	    through the network the RREP-DIO has passed.  In contrast, for a
	    symmetric route, it is the Address Vector when the RREQ-DIO arrives
	    at the TargNode, unchanged during the transmission to the OrigNode.
	    </dd>
        </dl>
      </section>
      <section anchor="artop" numbered="true" removeInRFC="false" toc="include" pn="section-4.3">
        <name slugifiedName="name-aodv-rpl-target-option">AODV-RPL Target Option</name>
        <t indent="0" pn="section-4.3-1"> The AODV-RPL Target (ART) option is based on the Target option
	in the core RPL specification <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.  The Flags field is replaced by
	the Destination Sequence Number of the TargNode, and the Prefix
	Length field is reduced to 7 bits so that the value is limited to
	be no greater than 127.  </t>
        <t indent="0" pn="section-4.3-2">
	An RREQ-DIO message <bcp14>MUST</bcp14> carry at least one ART option.  An RREP-DIO
	message <bcp14>MUST</bcp14> carry exactly one ART option. Otherwise, the message
	<bcp14>MUST</bcp14> be dropped.
        </t>
        <t indent="0" pn="section-4.3-3">
	OrigNode can include multiple TargNode addresses via multiple ART
	options in the RREQ-DIO, for routes that share the same requirement on
	metrics.  This reduces the cost to building only one DODAG for
	multiple targets.
        </t>
        <figure anchor="figTarg" align="left" suppress-title="false" pn="figure-3">
          <name slugifiedName="name-art-option-format-for-aodv-">ART Option Format for AODV-RPL</name>
          <artwork align="center" pn="section-4.3-4.1">
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Option Type  | Option Length |  Dest SeqNo   |X|Prefix Length|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               |
   |           Target Prefix / Address (Variable Length)           |
   .                                                               .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ . . .</artwork>
        </figure>
        <dl newline="true" spacing="normal" indent="3" pn="section-4.3-5">
          <dt pn="section-4.3-5.1">Option Type</dt>
          <dd pn="section-4.3-5.2">8-bit unsigned integer specifying the type of the option (0x0D).</dd>
          <dt pn="section-4.3-5.3">Option Length</dt>
          <dd pn="section-4.3-5.4">8-bit unsigned integer specifying the length of the option in
          octets, excluding the Option Type and Option Length fields.</dd>
          <dt pn="section-4.3-5.5">Dest SeqNo</dt>
          <dd pn="section-4.3-5.6">8-bit unsigned integer. In RREQ-DIO, if nonzero, it is the
          Sequence Number for the last route that OrigNode stored to the
          TargNode for which a route is desired.  In RREP-DIO, it is the
          Destination Sequence Number associated to the route.  Zero is used
          if there is no known information about the Sequence Number of
          TargNode and not used otherwise.</dd>
          <dt pn="section-4.3-5.7">X</dt>
          <dd pn="section-4.3-5.8">1-bit Reserved field.  This field <bcp14>MUST</bcp14> be
          initialized to zero by the sender and <bcp14>MUST</bcp14> be ignored
          by the receiver.</dd>
          <dt pn="section-4.3-5.9">Prefix Length</dt>
          <dd pn="section-4.3-5.10">7-bit unsigned integer.  The Prefix Length field contains the
          number of valid leading bits in the prefix. If Prefix Length is 0,
          then the value in the Target Prefix / Address field represents an
          IPv6 address, not a prefix.</dd>
          <dt pn="section-4.3-5.11">Target Prefix / Address</dt>
          <dd pn="section-4.3-5.12">A variable-length field with an IPv6 destination address or prefix.
          The length of the Target Prefix / Address field is the least number
          of octets that can represent all of the bits of the Prefix, in other
          words, Ceil(Prefix Length/8) octets.  When Prefix Length is not equal
          to 8*Ceil(Prefix Length/8) and nonzero, the Target Prefix / Address
          field will contain some initial bits that are not part of the Target
          Prefix.  Those initial bits (if any) <bcp14>MUST</bcp14> be set to
          zero on transmission and <bcp14>MUST</bcp14> be ignored on receipt.
          If Prefix Length is zero, the Address field is 128 bits.
	</dd>
        </dl>
      </section>
    </section>
    <section anchor="channel" numbered="true" removeInRFC="false" toc="include" pn="section-5">
      <name slugifiedName="name-symmetric-and-asymmetric-ro">Symmetric and Asymmetric Routes</name>
      <t indent="0" pn="section-5-1">
	Links are considered symmetric until indication to the contrary is
	received.  In Figures <xref target="figSymm-a" format="counter" sectionFormat="of" derivedContent="4"/> and
	<xref target="figSymm-b" format="counter" sectionFormat="of" derivedContent="5"/>, BR is the Border Router, O is the
	OrigNode, each R is an intermediate router, and T is the TargNode.
	In these examples, the use of BR is only for illustrative purposes;
	AODV does not depend on the use of border routers for its operation.
	If the RREQ-DIO arrives over an interface that
	is known to be symmetric and the S bit is set to 1, then it remains
	as 1, as illustrated in <xref target="figSymm-a" format="default" sectionFormat="of" derivedContent="Figure 4"/>.  If an
	intermediate router sends out RREQ-DIO with the S bit set to 1, then
	each link en route from the OrigNode O to this router has met
	the requirements of route discovery, and the route can be used
	symmetrically.
      </t>
      <figure anchor="figSymm-a" align="left" suppress-title="false" pn="figure-4">
        <name slugifiedName="name-aodv-rpl-with-symmetric-ins">AODV-RPL with Symmetric Instances</name>
        <artwork align="center" pn="section-5-2.1">
                               BR
                           /----+----\
                         /      |      \
                       /        |         \
                      R         R           R
                   _/  \        |          /  \
                  /     \       |         /     \
                 /       \      |        /        \
               R -------- R --- R ----- R -------- R
             /  \   &lt;--S=1--&gt;  / \    &lt;--S=1--&gt;   /  \
      &lt;--S=1--&gt;  \            /   \             /   &lt;--S=1--&gt;
        /         \          /     \          /         \
      O ---------- R ------ R------ R ----- R ----------- T
     / \                   / \             / \           / \
    /   \                 /   \           /   \         /   \
   /     \               /     \         /     \       /     \
  R ----- R ----------- R ----- R ----- R ----- R ---- R----- R

    &gt;---- RREQ-Instance (Control: O--&gt;T;  Data: T--&gt;O) -------&gt;
    &lt;---- RREP-Instance (Control: T--&gt;O;  Data: O--&gt;T) -------&lt; </artwork>
      </figure>
      <t indent="0" pn="section-5-3">
	Upon receiving an RREQ-DIO with the S bit set to 1, a node determines
	whether the link over which it was received can be used symmetrically,
	i.e., both directions meet the requirements of data transmission.  If
	the RREQ-DIO arrives over an interface that is not known to be
	symmetric or is known to be asymmetric, the S bit is set to 0.  If
	the S bit arrives already set to be 0, then it is set to be 0 when the
	RREQ-DIO is propagated (<xref target="figSymm-b" format="default" sectionFormat="of" derivedContent="Figure 5"/>).  For an
	asymmetric route, there is at least one hop that doesn't satisfy the
	OF.  Based on the S bit received in RREQ-DIO, TargNode
	T determines whether or not the route is symmetric before transmitting
	the RREP-DIO message upstream towards the OrigNode O.
      </t>
      <t indent="0" pn="section-5-4">


	It is beyond the scope of this document to specify the criteria used
	when determining whether or not each link is symmetric.  As an
	example, intermediate routers can use local information (e.g., bit
	rate, bandwidth, number of cells used in 6TiSCH <xref target="RFC9030" format="default" sectionFormat="of" derivedContent="RFC9030"/>), a priori knowledge (e.g., link quality according
	to previous communication), or averaging techniques as appropriate
	to the application.  Other link metric information can be acquired
	before AODV-RPL operation, by executing evaluation procedures; for
	instance, test traffic can be generated between nodes of the deployed
	network.  During AODV-RPL operation, Operations, Administration, and
	Maintenance (OAM) techniques for evaluating link state (see <xref target="RFC7548" format="default" sectionFormat="of" derivedContent="RFC7548"/>, <xref target="RFC7276" format="default" sectionFormat="of" derivedContent="RFC7276"/>, and <xref target="co-ioam" format="default" sectionFormat="of" derivedContent="co-ioam"/>) <bcp14>MAY</bcp14> be used (at regular intervals
	appropriate for the LLN).  The evaluation procedures are out of scope
	for AODV-RPL.  For further information on this topic, see <xref target="Link_Asymmetry" format="default" sectionFormat="of" derivedContent="Link_Asymmetry"/>, <xref target="low-power-wireless" format="default" sectionFormat="of" derivedContent="low-power-wireless"/>, and
	<xref target="empirical-study" format="default" sectionFormat="of" derivedContent="empirical-study"/>.
      </t>
      <t indent="0" pn="section-5-5">
	<xref target="appendix-a" format="default" sectionFormat="of" derivedContent="Appendix A"/> describes an example method using the
	upstream Expected Transmission Count (ETX) and downstream Received
	Signal Strength Indicator (RSSI) to estimate whether the link is
	symmetric in terms of link quality using an averaging technique.

      </t>
      <figure anchor="figSymm-b" align="left" suppress-title="false" pn="figure-5">
        <name slugifiedName="name-aodv-rpl-with-asymmetric-pa">AODV-RPL with Asymmetric Paired Instances</name>
        <artwork align="center" pn="section-5-6.1">
                                  BR
                              /----+----\
                            /      |      \
                          /        |        \
                        R          R          R
                      / \          |        /   \
                    /     \        |       /      \
                  /         \      |      /         \
                 R --------- R --- R ---- R --------- R
               /  \   --S=1--&gt;   / \    --S=0--&gt;   /   \
         --S=1--&gt;   \           /    \            /   --S=0--&gt;
          /          \        /       \         /         \
        O ---------- R ------ R------ R ----- R ----------- T
       / \                   / \             / \           / \
      /  &lt;--S=0--           /   \           /   \         / &lt;--S=0--
     /     \               /     \         /     \       /     \
    R ----- R ----------- R ----- R ----- R ----- R ---- R----- R
                &lt;--S=0--   &lt;--S=0-- &lt;--S=0-- &lt;--S=0--    &lt;--S=0--

    &gt;---- RREQ-Instance (Control: O--&gt;T;  Data: T--&gt;O) -------&gt;
    &lt;---- RREP-Instance (Control: T--&gt;O;  Data: O--&gt;T) -------&lt;</artwork>
      </figure>
      <t indent="0" pn="section-5-7">
	As illustrated in <xref target="figSymm-b" format="default" sectionFormat="of" derivedContent="Figure 5"/>, an intermediate
	router determines the S bit value that the RREQ-DIO should carry
	using link asymmetry detection methods as discussed earlier in
	this section.  In many cases, the intermediate router has already
	made the link asymmetry decision by the time RREQ-DIO arrives.
      </t>
      <t indent="0" pn="section-5-8">
	See <xref target="Examples" format="default" sectionFormat="of" derivedContent="Appendix B"/> for examples illustrating RREQ and RREP
        transmissions in some networks with symmetric and asymmetric links.
      </t>
    </section>
    <section anchor="aodvrplop" numbered="true" removeInRFC="false" toc="include" pn="section-6">
      <name slugifiedName="name-aodv-rpl-operation">AODV-RPL Operation</name>
      <section anchor="rreq" numbered="true" removeInRFC="false" toc="include" pn="section-6.1">
        <name slugifiedName="name-generating-rreq">Generating RREQ</name>
        <t indent="0" pn="section-6.1-1">
	The route discovery process is initiated when an application
	at the OrigNode has data to be transmitted to the TargNode but does
	not have a route that satisfies the OF for the target
	of the application's data. In this case, the OrigNode builds a local
	RPL Instance and a DODAG rooted at itself. Then, it transmits a DIO
	message containing exactly one RREQ option
	(see <xref target="RREQmsg" format="default" sectionFormat="of" derivedContent="Section 4.1"/>) to multicast group all-AODV-RPL-nodes.
	The RREQ-DIO <bcp14>MUST</bcp14> contain at least one ART option
	(see <xref target="artop" format="default" sectionFormat="of" derivedContent="Section 4.3"/>), which indicates the TargNode.
	The S bit in RREQ-DIO sent out by the OrigNode is set to 1.
        </t>
        <t indent="0" pn="section-6.1-2">
	Each node maintains a Sequence Number; the operation is specified in
	<xref target="RFC6550" sectionFormat="of" section="7.2" format="default" derivedLink="https://rfc-editor.org/rfc/rfc6550#section-7.2" derivedContent="RFC6550"/>.
	When the OrigNode initiates a
	route discovery process, it <bcp14>MUST</bcp14> increase its own Sequence Number to
	avoid conflicts with previously established routes.  The Sequence
	Number is carried in the Orig SeqNo field of the RREQ option.
        </t>
        <t indent="0" pn="section-6.1-3"> The Target Prefix / Address in the ART option can be a unicast IPv6
	address or a prefix.  The OrigNode can initiate
	the route discovery process for multiple targets simultaneously by
	including multiple ART options. Within an RREQ-DIO, the OF for the routes to different TargNodes <bcp14>MUST</bcp14> be the same.
        </t>
        <t indent="0" pn="section-6.1-4"> OrigNode can maintain different RPL Instances to discover routes with
	different requirements to the same targets. Using the RPLInstanceID
	pairing mechanism (see <xref target="instancepairing" format="default" sectionFormat="of" derivedContent="Section 6.3.3"/>), route replies
	(RREP-DIOs) for different RPL Instances can be generated.
        </t>
        <t indent="0" pn="section-6.1-5"> The transmission of RREQ-DIO obeys the Trickle timer
	<xref target="RFC6206" format="default" sectionFormat="of" derivedContent="RFC6206"/>.  If the duration specified by the
	L field has elapsed, the OrigNode <bcp14>MUST</bcp14> leave
	the DODAG and stop sending RREQ-DIOs in the related RPL Instance.
	OrigNode needs to set the L field such that the DODAG will not
	prematurely timeout during data transfer with the TargNode.
	For setting this value, it has to consider factors such as
	the Trickle timer, TargNode hop distance, network size, link
	behavior, expected data usage time, and so on.
        </t>
      </section>
      <section anchor="process_rreq" numbered="true" removeInRFC="false" toc="include" pn="section-6.2">
        <name slugifiedName="name-receiving-and-forwarding-rr">Receiving and Forwarding RREQ Messages</name>
        <section anchor="rreq_step1" numbered="true" removeInRFC="false" toc="include" pn="section-6.2.1">
          <name slugifiedName="name-step-1-rreq-reception-and-e">Step 1: RREQ Reception and Evaluation</name>
          <t indent="0" pn="section-6.2.1-1">When a router X receives an RREQ message over a link from a
	  neighbor Y, X first determines whether or not the RREQ is valid.  If
	  valid, X then determines whether or not it has sufficient resources
	  available to maintain the RREQ-Instance and the value of the S bit
	  needed to process an eventual RREP, if the RREP were to be received.
	  If not valid, then X <bcp14>MUST</bcp14> either free up sufficient resources (the
	  means for this are beyond the scope of this document), or drop the
	  packet and discontinue processing of the RREQ.  Otherwise, X next
	  determines whether the RREQ advertises a usable route to OrigNode,
	  by checking whether the link to Y can be used to transmit packets to
	  OrigNode.
          </t>
          <t indent="0" pn="section-6.2.1-2">
	    When H=0 in the incoming RREQ, the router <bcp14>MUST</bcp14> drop the
	    RREQ-DIO if one of its addresses is present in the Address Vector.
	    When H=1 in the incoming RREQ, the router <bcp14>MUST</bcp14> drop the RREQ
	    message if the Orig SeqNo field of the RREQ is older than the SeqNo
	    value that X has stored for a route to OrigNode.
	    Otherwise, the router determines whether to propagate the RREQ-DIO.
	    It does this by determining whether or not a route to OrigNode
	    using the upstream direction of the incoming link satisfies the
	    Objective Function (OF).  In order to evaluate the OF, the router
	    first determines the maximum useful Rank (MaxUsefulRank).  If the
	    router has previously joined the RREQ-Instance associated with
	    the RREQ-DIO, then MaxUsefulRank is set to be the Rank value that
	    was stored when the router processed the best previous RREQ for
	    the DODAG with the given RREQ-Instance.  Otherwise, MaxUsefulRank
	    is set to be RankLimit.  If OF cannot be satisfied (i.e.,
	    the Rank evaluates to a value greater than MaxUsefulRank),
	    the RREQ-DIO <bcp14>MUST</bcp14> be dropped, and the following steps are not
	    processed.  Otherwise, the router <bcp14>MUST</bcp14> join the RREQ-Instance
	    and prepare to propagate the RREQ-DIO, as follows. The upstream
	    neighbor router that transmitted the received RREQ-DIO is selected
	    as the preferred parent in the RREQ-Instance.
          </t>
        </section>
        <section anchor="rreq_step2" numbered="true" removeInRFC="false" toc="include" pn="section-6.2.2">
          <name slugifiedName="name-step-2-targnode-and-interme">Step 2: TargNode and Intermediate Router Determination</name>
          <t indent="0" pn="section-6.2.2-1">
	    After determining that a received RREQ provides a usable route
	    to OrigNode, a router determines whether it is a TargNode, a possible intermediate router between OrigNode and a TargNode,
	    or both.  The router is a TargNode if it finds one of its own
	    addresses in a Target option in the RREQ.  After possibly
	    propagating the RREQ according to the procedures in Steps 3,
	    4, and 5, the TargNode generates an RREP as specified in
	    <xref target="gen-rrep" format="default" sectionFormat="of" derivedContent="Section 6.3"/>.  If S=0, the determination of TargNode
	    status and determination of a usable route to OrigNode is the same.
          </t>
          <t indent="0" pn="section-6.2.2-2">
	    If the OrigNode tries to reach multiple TargNodes in a
	    single RREQ-Instance, one of the TargNodes can be an intermediate
	    router to other TargNodes.  In this case, before transmitting the
	    RREQ-DIO to multicast group all-AODV-RPL-nodes, a TargNode <bcp14>MUST</bcp14>
	    delete the Target option encapsulating its own address, so that
	    downstream routers with higher Rank values do not try to create
	    a route to this TargNode.
          </t>
          <t indent="0" pn="section-6.2.2-3">
	    An intermediate router could receive several RREQ-DIOs from
	    routers with lower Rank values in the same RREQ-Instance with
	    different lists of Target options.  For the purposes of determining
	    the intersection with previous incoming RREQ-DIOs, the intermediate
	    router maintains a record of the targets that have been requested
	    for a given RREQ-Instance.  An incoming RREQ-DIO message having
	    multiple ART options coming from a router with higher Rank than
	    the Rank of the stored targets is ignored.  When transmitting the
	    RREQ-DIO, the intersection of all received lists <bcp14>MUST</bcp14> be included
	    if it is nonempty after TargNode has deleted the Target option
	    encapsulating its own address.  If the intersection is empty, it
	    means that all the targets have been reached, and the router <bcp14>MUST NOT</bcp14> transmit any RREQ-DIO.  Otherwise, it proceeds to
	    <xref target="rreq_step3" format="default" sectionFormat="of" derivedContent="Section 6.2.3"/>.
          </t>
          <t indent="0" pn="section-6.2.2-4">
	    For example, suppose two RREQ-DIOs are received with the same
	    RPL Instance and OrigNode.  Suppose further that the first
	    RREQ has (T1, T2) as the targets, and the second one has (T2, T4)
	    as targets. Then, only T2 needs to be included in the generated
	    RREQ-DIO.
          </t>
          <t indent="0" pn="section-6.2.2-5">
	    The reasoning for using the intersection of the lists in the
	    RREQs is as follows.  When two or more RREQs are received with
            the same Orig SeqNo, they were transmitted by OrigNode with the
            same destinations and OF.  When an intermediate node receives two
            RREQs with the same Orig SeqNo but different lists of destinations,
            that means that some intermediate nodes retransmitting the RREQs
            have already deleted themselves from the list of destinations
	    before they retransmitted the RREQ.  Those deleted nodes are
            not to be reinserted back into the list of destinations.
          </t>
        </section>
        <section anchor="rreq_step3" numbered="true" removeInRFC="false" toc="include" pn="section-6.2.3">
          <name slugifiedName="name-step-3-intermediate-router-">Step 3: Intermediate Router RREQ Processing</name>
          <t indent="0" pn="section-6.2.3-1">
	    The intermediate router establishes itself as a viable node
	    for a route to OrigNode as follows.  If the H bit is set to 1,
	    for a hop-by-hop route, then the router <bcp14>MUST</bcp14> build or update
	    its upward route entry towards OrigNode, which includes at least
	    the following items: Source Address, RPLInstanceID, Destination
	    Address, Next Hop, Lifetime, and Sequence Number.
            The Destination Address and the RPLInstanceID can be
	    learned from the DODAGID and the RPLInstanceID of the RREQ-DIO, respectively.
	    The Source Address is the address used by the router to
	    send data to the Next Hop, i.e., the preferred parent.
	    The lifetime is set according to DODAG configuration (not
	    the L field) and can be extended when the route is actually used.
	    The Sequence Number represents the freshness of the route entry;
	    it is copied from the Orig SeqNo field of the RREQ option. A route
	    entry with the same source and destination address and the same
	    RPLInstanceID, but a stale Sequence Number (i.e., incoming Sequence
	    Number is less than the currently stored Sequence Number of the
	    route entry), <bcp14>MUST</bcp14> be deleted.
          </t>
        </section>
        <section anchor="rreq_step4" numbered="true" removeInRFC="false" toc="include" pn="section-6.2.4">
          <name slugifiedName="name-step-4-symmetric-route-proc">Step 4: Symmetric Route Processing at an Intermediate Router</name>
          <t indent="0" pn="section-6.2.4-1">
	    If the S bit of the incoming RREQ-DIO is 0, then the route cannot
	    be symmetric, and the S bit of the RREQ-DIO to be transmitted is
	    set to 0.  Otherwise, the router <bcp14>MUST</bcp14> determine
	    whether the downward direction (i.e., towards the TargNode) of the
	    incoming link satisfies the OF.  If it does, the S bit of the
	    RREQ-DIO to be transmitted is set to 1.  Otherwise, the S bit of
	    the RREQ-DIO to be transmitted is set to 0.
          </t>
          <t indent="0" pn="section-6.2.4-2">
	    When a router joins the RREQ-Instance, it also associates within
	    its data structure for the RREQ-Instance the information about
	    whether or not the RREQ-DIO to be transmitted has the S bit set
	    to 1.  This information
	    associated to RREQ-Instance is known as the S bit of the
	    RREQ-Instance. It will be used later during the RREP-DIO message
	    processing (see <xref target="asymmetricrrep" format="default" sectionFormat="of" derivedContent="Section 6.3.2"/>).
          </t>
          <t indent="0" pn="section-6.2.4-3">Suppose a router has joined the RREQ-Instance, the H bit is set
          to 0, and the S bit of the RREQ-Instance is set to 1.  In this case,
          the router <bcp14>MAY</bcp14> optionally include the Address Vector
          of the symmetric route back to OrigNode as part of the RREQ-Instance
          data.  This is useful if the router later receives an RREP-DIO that
          is paired with the RREQ-Instance.  If the router does NOT include
          the Address Vector, then it has to rely on multicast for the RREP.
          The multicast can impose a substantial performance penalty.
          </t>
        </section>
        <section anchor="rreq_step5" numbered="true" removeInRFC="false" toc="include" pn="section-6.2.5">
          <name slugifiedName="name-step-5-rreq-propagation-at-">Step 5: RREQ Propagation at an Intermediate Router</name>
          <t indent="0" pn="section-6.2.5-1">
	    If the router is an intermediate router, then it transmits the
	    RREQ-DIO to the multicast group all-AODV-RPL-nodes; if the H bit is
	    set to 0, the intermediate router <bcp14>MUST</bcp14> append
	    the address of its interface receiving the RREQ-DIO into the
	    Address Vector.  In addition, if the address of the router's
	    interface transmitting the RREQ-DIO is not the same as the address
            of the interface receiving the RREQ-DIO, the router <bcp14>MUST</bcp14> also
	    append the transmitting interface address into the Address Vector.
          </t>
        </section>
        <section anchor="rreq_step6" numbered="true" removeInRFC="false" toc="include" pn="section-6.2.6">
          <name slugifiedName="name-step-6-rreq-reception-at-ta">Step 6: RREQ Reception at TargNode</name>
          <t indent="0" pn="section-6.2.6-1">
	    If the router is a TargNode and was already associated with the
	    RREQ-Instance, it takes no further action and does not send an
	    RREP-DIO.  If TargNode is not already associated with the
	    RREQ-Instance, it prepares and transmits an RREP-DIO, possibly
	    after waiting for RREP_WAIT_TIME, as detailed in
	    (<xref target="gen-rrep" format="default" sectionFormat="of" derivedContent="Section 6.3"/>).
          </t>
        </section>
      </section>
      <section anchor="gen-rrep" numbered="true" removeInRFC="false" toc="include" pn="section-6.3">
        <name slugifiedName="name-generating-rrep-at-targnode">Generating RREP at TargNode</name>
        <t indent="0" pn="section-6.3-1"> When a TargNode receives an RREQ message over a link from a
        neighbor Y, TargNode first follows the procedures in <xref target="process_rreq" format="default" sectionFormat="of" derivedContent="Section 6.2"/>.  If the link to Y can be used to transmit
        packets to OrigNode, TargNode generates an RREP according to Sections
        <xref format="counter" target="rrepsymmetric" sectionFormat="of" derivedContent="6.3.1"/> and <xref target="asymmetricrrep" format="counter" sectionFormat="of" derivedContent="6.3.2"/>.  Otherwise, TargNode
        drops the RREQ and does not generate an RREP.
        </t>
        <t indent="0" pn="section-6.3-2">
	    If the L field is not 0, the TargNode <bcp14>MAY</bcp14> delay transmitting the
	    RREP-DIO for the duration RREP_WAIT_TIME to await a route with a lower
	    Rank.  The value of RREP_WAIT_TIME is set by default to 1/4 of
	    the duration determined by the L field.  For L == 0,
	    RREP_WAIT_TIME is set by default to 0.  Depending upon the
	    application, RREP_WAIT_TIME may be set to other values.
	    Smaller values enable quicker formation for the P2P route.
	    Larger values enable formation of P2P routes with better
	    Rank values.
        </t>
        <t indent="0" pn="section-6.3-3">
	    The address of the OrigNode <bcp14>MUST</bcp14> be
	    encapsulated in the ART option and included in this RREP-DIO
	    message along with the SeqNo of TargNode.
        </t>
        <section anchor="rrepsymmetric" numbered="true" removeInRFC="false" toc="include" pn="section-6.3.1">
          <name slugifiedName="name-rrep-dio-for-symmetric-rout">RREP-DIO for Symmetric Route</name>
          <t indent="0" pn="section-6.3.1-1">
	    If the RREQ-Instance corresponding to the RREQ-DIO that arrived
	    at TargNode has the S bit set to 1, there
	    is a symmetric route, both of whose directions satisfy the
	    OF. Other RREQ-DIOs might later provide better
	    upward routes.  The method of selection between a
	    qualified symmetric route and an asymmetric route that might have
	    better performance is implementation specific and out of scope.
          </t>
          <t indent="0" pn="section-6.3.1-2">
	    For a symmetric route, the RREP-DIO message is unicast to the Next
	    Hop according to the Address Vector (H=0) or the route
	    entry (H=1);  the DODAG in RREP-Instance does not need to be
	    built.  The RPLInstanceID in the RREP-Instance is paired as
	    defined in <xref target="instancepairing" format="default" sectionFormat="of" derivedContent="Section 6.3.3"/>.  If the H bit
	    is set to 0, the Address Vector from the RREQ-DIO <bcp14>MUST</bcp14> be
	    included in the RREP-DIO.
          </t>
        </section>
        <section anchor="asymmetricrrep" numbered="true" removeInRFC="false" toc="include" pn="section-6.3.2">
          <name slugifiedName="name-rrep-dio-for-asymmetric-rou">RREP-DIO for Asymmetric Route</name>
          <t indent="0" pn="section-6.3.2-1">
	    When an RREQ-DIO arrives at a TargNode with the S bit set to 0,
	    the TargNode <bcp14>MUST</bcp14> build a DODAG in the RREP-Instance
	    corresponding to the RREQ-DIO rooted at itself, in order to
	    provide OrigNode with a downstream route
	    to the TargNode. The RREP-DIO message is transmitted to
	    multicast group all-AODV-RPL-nodes.
          </t>
        </section>
        <section anchor="instancepairing" numbered="true" removeInRFC="false" toc="include" pn="section-6.3.3">
          <name slugifiedName="name-rplinstanceid-pairing">RPLInstanceID Pairing</name>
          <t indent="0" pn="section-6.3.3-1">
	  Since the RPLInstanceID is assigned locally (i.e., there is no
	  coordination between routers in the assignment of RPLInstanceID), the
	  tuple (OrigNode, TargNode, RPLInstanceID) is needed to uniquely
	  identify a discovered route. It is possible that multiple route
	  discoveries with dissimilar OFs
	  are initiated simultaneously. Thus, between the same pair of OrigNode
	  and TargNode, there can be multiple AODV-RPL route discovery
	  instances.  So that OrigNode and TargNode can avoid any mismatch,
	  they <bcp14>MUST</bcp14> pair the RREQ-Instance and the RREP-Instance in the same
	  route discovery by using the RPLInstanceID.
          </t>
          <t indent="0" pn="section-6.3.3-2">
	  When preparing the RREP-DIO, a TargNode could find the RPLInstanceID
	  candidate for the RREP-Instance is already occupied by another RPL
	  Instance from an earlier route discovery operation that is still
	  active.  This unlikely case might happen if two distinct OrigNodes
	  need routes to the same TargNode, and they happen to use the same
	  RPLInstanceID for RREQ-Instance. In such cases, the
	  RPLInstanceID of an already active RREP-Instance <bcp14>MUST NOT</bcp14> be used
	  again for assigning RPLInstanceID for the later RREP-Instance.
	  If the same RPLInstanceID were reused for two
	  distinct DODAGs originated with the same DODAGID (TargNode address),
	  intermediate routers could not distinguish between these
	  DODAGs (and their associated OFs). Instead, the
	  RPLInstanceID <bcp14>MUST</bcp14> be replaced by another value so that the two
	  RREP-Instances can be distinguished.  In the RREP-DIO option, the
	  Delta field of the RREP-DIO message (<xref target="figRREP" format="default" sectionFormat="of" derivedContent="Figure 2"/>)
	  indicates the value that TargNode adds to the
	  RPLInstanceID in the RREQ-DIO that it received, to obtain the value
	  of the RPLInstanceID it uses in the RREP-DIO message.
	  0 indicates that the RREQ-InstanceID has the same value as
          the RPLInstanceID of the RREP message.
	  When the new RPLInstanceID after incrementation exceeds 255, it
	  rolls over starting at 0. For example, if the RREQ-InstanceID
	  is 252 and incremented by 6, the new RPLInstanceID will be 2.
	  Related operations can be found in <xref target="forwardRREP" format="default" sectionFormat="of" derivedContent="Section 6.4"/>.
	  RPLInstanceID collisions do not occur across RREQ-DIOs; the
	  DODAGID equals the OrigNode address and is sufficient to
	  disambiguate between DODAGs.
          </t>
        </section>
      </section>
      <section anchor="forwardRREP" numbered="true" removeInRFC="false" toc="include" pn="section-6.4">
        <name slugifiedName="name-receiving-and-forwarding-rre">Receiving and Forwarding RREP</name>
        <t indent="0" pn="section-6.4-1"> Upon receiving an RREP-DIO, a router that already belongs to the
	    RREP-Instance <bcp14>SHOULD</bcp14> drop the RREP-DIO.  Otherwise, the router
 	    performs the steps in the following subsections.
        </t>
        <section anchor="rrep_step1" numbered="true" removeInRFC="false" toc="include" pn="section-6.4.1">
          <name slugifiedName="name-step-1-receiving-and-evalua">Step 1: Receiving and Evaluation</name>
          <t indent="0" pn="section-6.4.1-1">
	    If the OF is not satisfied, the router <bcp14>MUST NOT</bcp14>
	    join the DODAG; the router <bcp14>MUST</bcp14> discard the RREP-DIO and does not
	    execute the remaining steps in this section.  An intermediate
	    router <bcp14>MUST</bcp14> discard an RREP if one of its addresses is present
	    in the Address Vector and does not execute the remaining steps in
	    this section.
          </t>
          <t indent="0" pn="section-6.4.1-2">
	    If the S bit of the associated RREQ-Instance is set to 1,
	    the router <bcp14>MUST</bcp14> proceed to <xref target="rrep_step2" format="default" sectionFormat="of" derivedContent="Section 6.4.2"/>.
          </t>
          <t indent="0" pn="section-6.4.1-3"> If the S bit of the RREQ-Instance is set to 0, the router <bcp14>MUST</bcp14>
          determine whether the downward direction of the link (towards the
          TargNode) over which the RREP-DIO is received satisfies the
          OF and whether the router's Rank would not exceed
          the RankLimit.  If these are true, the router joins the DODAG of the
          RREP-Instance.  The router that transmitted the received RREP-DIO is
          selected as the preferred parent.  Afterwards, other RREP-DIO
          messages can be received; AODV-RPL does not specify any action to be
          taken in such cases.
          </t>
        </section>
        <section anchor="rrep_step2" numbered="true" removeInRFC="false" toc="include" pn="section-6.4.2">
          <name slugifiedName="name-step-2-orignode-or-intermed">Step 2: OrigNode or Intermediate Router</name>
          <t indent="0" pn="section-6.4.2-1">The router updates its stored value of the TargNode's Sequence
	  Number according to the value provided in the ART option.  The router next
	  checks if one of its addresses is included in the ART option.  If it is
	  included, this router is the OrigNode of the route discovery. Otherwise, it is
   an intermediate router.</t>
        </section>
        <section anchor="rrep_step3" numbered="true" removeInRFC="false" toc="include" pn="section-6.4.3">
          <name slugifiedName="name-step-3-build-route-to-targn">Step 3: Build Route to TargNode</name>
          <t indent="0" pn="section-6.4.3-1">
	    If the H bit is set to 1, then the router (OrigNode or
	    intermediate) <bcp14>MUST</bcp14> build a downward route entry towards TargNode
	    that includes at least the following items: OrigNode Address,
	    RPLInstanceID, TargNode Address as destination, Next Hop, Lifetime,
	    and Sequence Number.  For a symmetric route, the Next Hop in the
	    route entry is the router from which the RREP-DIO is received.  For
	    an asymmetric route, the Next Hop is the preferred parent in the
	    DODAG of RREP-Instance.  The RPLInstanceID in the route entry <bcp14>MUST</bcp14>
	    be the RREQ-InstanceID (i.e., after subtracting the Delta field
	    value from the value of the RPLInstanceID).  The source address is
	    learned from the ART option, and
	    the destination address is learned from the DODAGID.  The lifetime
	    is set according to DODAG configuration (i.e., not the L field)
	    and can be extended when the route is actually used. The Sequence
	    Number represents the freshness of the route entry and is copied
	    from the Dest SeqNo field of the ART option of the RREP-DIO.
	    A route entry with the same source and destination address and the same
	    RPLInstanceID, but a stale Sequence Number, <bcp14>MUST</bcp14> be deleted.
          </t>
        </section>
        <section anchor="rrep_step4" numbered="true" removeInRFC="false" toc="include" pn="section-6.4.4">
          <name slugifiedName="name-step-4-rrep-propagation">Step 4: RREP Propagation</name>
          <t indent="0" pn="section-6.4.4-1">
	    If the receiver is the OrigNode, it can start transmitting the
	    application data to TargNode along the path as provided in
	    RREP-Instance, and processing for the RREP-DIO is
	    complete. Otherwise, the RREP will be propagated towards OrigNode.
	    If H=0, the intermediate router <bcp14>MUST</bcp14> include the
	    address of the interface receiving the RREP-DIO into the Address
	   Vector.  If H=1, according to the previous step, the intermediate
	    router has set up a route entry for TargNode. If the intermediate
	    router has a route to OrigNode, it uses that route to unicast the
	    RREP-DIO to OrigNode.  Otherwise, in the case of a symmetric route,
	    the RREP-DIO message is unicast to the Next Hop according to the
	    Address Vector in the RREP-DIO (H=0) or the local route entry
	    (H=1).  Otherwise, in the case of an asymmetric route, the
	    intermediate router transmits the RREP-DIO to multicast group
	    all-AODV-RPL-nodes.  The RPLInstanceID in the transmitted RREP-DIO
	    is the same as the value in the received RREP-DIO.
          </t>
        </section>
      </section>
    </section>
    <section anchor="G-RREP" numbered="true" removeInRFC="false" toc="include" pn="section-7">
      <name slugifiedName="name-gratuitous-rrep">Gratuitous RREP</name>
      <t indent="0" pn="section-7-1">
	In some cases, an intermediate router that receives an RREQ-DIO message
	<bcp14>MAY</bcp14> unicast a Gratuitous RREP-DIO (G-RREP-DIO) message back to OrigNode before
	continuing the transmission of the RREQ-DIO towards TargNode.  The Gratuitous RREP
	(G-RREP) allows the OrigNode to start transmitting
	data to TargNode sooner.  The G bit of the RREP option is provided to
	distinguish the G-RREP-DIO (G=1) sent by the intermediate
	router from the RREP-DIO sent by TargNode (G=0).
      </t>
      <t indent="0" pn="section-7-2">
	The G-RREP-DIO <bcp14>MAY</bcp14> be sent out when the intermediate router
	receives an RREQ-DIO for a TargNode and the router has a pair of
	downward and upward routes to the TargNode that also satisfy the
	OF and for which the Destination Sequence Number is
	at least as large as the Sequence Number in the RREQ-DIO message.
	After unicasting the G-RREP to the OrigNode, the intermediate
	router then unicasts the RREQ towards TargNode, so that TargNode will
	have the advertised route towards OrigNode along with the
	RREQ-InstanceID for the RREQ-Instance.  An upstream intermediate
	router that receives such a G-RREP <bcp14>MUST</bcp14> also generate a G-RREP and
        send it further upstream towards OrigNode.
      </t>
      <t indent="0" pn="section-7-3">
	In case of source routing, the intermediate router <bcp14>MUST</bcp14> include the
	Address Vector between the OrigNode and itself in the
	G-RREP.  It also includes the Address Vector in the unicast
	RREQ-DIO towards TargNode.  Upon reception of the unicast RREQ-DIO,
	the TargNode will have a
	route Address Vector from itself to the OrigNode. Then, the
	router <bcp14>MUST</bcp14> include the Address Vector from the TargNode to the
	router itself in the G-RREP-DIO to be transmitted.
      </t>
      <t indent="0" pn="section-7-4">
	For establishing hop-by-hop routes, the intermediate router <bcp14>MUST</bcp14>
	unicast the received RREQ-DIO to the Next Hop on the route. The Next
	Hop router along the route <bcp14>MUST</bcp14> build new route entries with the related
	RPLInstanceID and DODAGID in the downward direction. This process
	repeats at each node until the RREQ-DIO arrives at the TargNode.
	Then, the TargNode and each router along the path towards OrigNode
	<bcp14>MUST</bcp14> unicast the RREP-DIO hop-by-hop towards OrigNode
	as specified in <xref target="gen-rrep" format="default" sectionFormat="of" derivedContent="Section 6.3"/>.
      </t>
    </section>
    <section anchor="trickle" numbered="true" removeInRFC="false" toc="include" pn="section-8">
      <name slugifiedName="name-operation-of-trickle-timer">Operation of Trickle Timer</name>
      <t indent="0" pn="section-8-1">
	RREQ-Instance/RREP-Instance multicast uses Trickle timer operations
	<xref target="RFC6206" format="default" sectionFormat="of" derivedContent="RFC6206"/> to control RREQ-DIO and
	RREP-DIO transmissions.  The Trickle control of these DIO transmissions
	follows the procedures described in 
	<xref target="RFC6550" sectionFormat="of" section="8.3" format="default" derivedLink="https://rfc-editor.org/rfc/rfc6550#section-8.3" derivedContent="RFC6550"/> entitled "DIO Transmission".  If the route is
	symmetric, the RREP-DIO does not need the Trickle timer mechanism.

      </t>
    </section>
    <section anchor="iana" numbered="true" removeInRFC="false" toc="include" pn="section-9">
      <name slugifiedName="name-iana-considerations">IANA Considerations</name>
      <t indent="0" pn="section-9-1">
AODV-RPL uses the "P2P Route Discovery Mode of Operation" (MOP == 4), with new
options as specified in this document. This document has been added as an
additional reference for "P2P Route Discovery Mode of Operation" in the "Mode
of Operation" registry within the "Routing Protocol for Low Power and Lossy
Networks (RPL)" registry group.
      </t>
      <t indent="0" pn="section-9-2">
	IANA has assigned the three new AODV-RPL options described in <xref target="ianaOpts" format="default" sectionFormat="of" derivedContent="Table 1"/> in the "RPL Control Message Options" registry
	within the "Routing Protocol for Low Power and Lossy Networks (RPL)"
	registry group.
      </t>
      <table anchor="ianaOpts" align="center" pn="table-1">
        <name slugifiedName="name-aodv-rpl-options">AODV-RPL Options</name>
        <thead>
          <tr>
            <th align="left" colspan="1" rowspan="1">Value</th>
            <th align="left" colspan="1" rowspan="1">Meaning</th>
            <th align="left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="left" colspan="1" rowspan="1">0x0B</td>
            <td align="left" colspan="1" rowspan="1">RREQ</td>
            <td align="left" colspan="1" rowspan="1">RFC 9854</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1">0x0C</td>
            <td align="left" colspan="1" rowspan="1">RREP</td>
            <td align="left" colspan="1" rowspan="1">RFC 9854</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1">0x0D</td>
            <td align="left" colspan="1" rowspan="1">ART</td>
            <td align="left" colspan="1" rowspan="1">RFC 9854</td>
          </tr>
        </tbody>
      </table>
      <t indent="0" pn="section-9-4"> 
        IANA has allocated the permanent multicast address with
        link-local scope in <xref target="ianaMultiAddress" format="default" sectionFormat="of" derivedContent="Table 2"/> for nodes implementing
        this specification. This allocation has been made in the "Local Network Control Block
        (224.0.0.0 - 224.0.0.255 (224.0.0/24))" registry within the
        "IPv4 Multicast Address Space Registry" registry group.
      </t>
      <table anchor="ianaMultiAddress" align="center" pn="table-2">
        <name slugifiedName="name-permanent-multicast-address">Permanent Multicast Address with Link-Local Scope</name>
        <thead>
          <tr>
            <th align="left" colspan="1" rowspan="1">Address(es)</th>
            <th align="left" colspan="1" rowspan="1">Description</th>
            <th align="left" colspan="1" rowspan="1">References</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="left" colspan="1" rowspan="1">224.0.0.69</td>
            <td align="left" colspan="1" rowspan="1">all-AODV-RPL-nodes</td>
            <td align="left" colspan="1" rowspan="1">RFC 9854</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section anchor="sec" numbered="true" removeInRFC="false" toc="include" pn="section-10">
      <name slugifiedName="name-security-considerations">Security Considerations</name>
      <t indent="0" pn="section-10-1">The security considerations for the operation of AODV-RPL are similar
      to those for the operation of RPL (as described in Section <xref target="RFC6550" sectionFormat="bare" section="19" format="default" derivedLink="https://rfc-editor.org/rfc/rfc6550#section-19" derivedContent="RFC6550"/> of the RPL
      specification <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>).  Sections <xref target="RFC6550" sectionFormat="bare" section="6.1" format="default" derivedLink="https://rfc-editor.org/rfc/rfc6550#section-6.1" derivedContent="RFC6550"/> and <xref target="RFC6550" sectionFormat="bare" section="10" format="default" derivedLink="https://rfc-editor.org/rfc/rfc6550#section-10" derivedContent="RFC6550"/> of <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/> describe RPL's optional security framework, which
      AODV-RPL relies on to provide data confidentiality, authentication,
      replay protection, and delay protection services.  Additional analysis
      for the security threats to RPL can be found in <xref target="RFC7416" format="default" sectionFormat="of" derivedContent="RFC7416"/>.</t>
      <t indent="0" pn="section-10-2">A router can join a temporary DAG created for a secure AODV-RPL route
      discovery only if it can support the security configuration in use (see
      <xref target="RFC6550" sectionFormat="of" section="6.1" format="default" derivedLink="https://rfc-editor.org/rfc/rfc6550#section-6.1" derivedContent="RFC6550"/>), which also
      specifies the key in use.  It does not matter whether the key is
      preinstalled or dynamically acquired.  The router must have the key in
      use before it can join the DAG being created for secure route
      discovery.</t>
      <t indent="0" pn="section-10-3">If a rogue router knows the key for the security configuration in
      use, it can join the secure AODV-RPL route discovery and cause various
      types of damage.  Such a rogue router could advertise false information
      in its DIOs in order to include itself in the discovered route(s).  It
      could generate bogus RREQ-DIO and RREP-DIO messages carrying bad
      routes or maliciously modify genuine RREP-DIO messages it receives.  A
      rogue router acting as the OrigNode could launch denial-of-service
      attacks against the LLN deployment by initiating fake AODV-RPL route
      discoveries.  When rogue routers might be present, RPL's preinstalled
      mode of operation, where the key to use for route discovery is
      preinstalled, <bcp14>SHOULD</bcp14> be used.
      </t>
      <t indent="0" pn="section-10-4">
    When an RREQ-DIO message uses the source routing option by setting the H
    bit to 0, a rogue router may populate the Address Vector field with a set
    of addresses that may result in the RREP-DIO traveling in a routing loop.
      </t>
      <t indent="0" pn="section-10-5">
	If a rogue router is able to forge a G-RREP,
	it could mount denial-of-service attacks.
      </t>
    </section>
  </middle>
  <back>
    <references pn="section-11">
      <name slugifiedName="name-references">References</name>
      <references pn="section-11.1">
        <name slugifiedName="name-normative-references">Normative References</name>
        <reference anchor="RFC2119" target="https://www.rfc-editor.org/info/rfc2119" quoteTitle="true" derivedAnchor="RFC2119">
          <front>
            <title>Key words for use in RFCs to Indicate Requirement Levels</title>
            <author fullname="S. Bradner" initials="S." surname="Bradner"/>
            <date month="March" year="1997"/>
            <abstract>
              <t indent="0">In many standards track documents several words are used to signify the requirements in the specification. These words are often capitalized. This document defines these words as they should be interpreted in IETF documents. This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="2119"/>
          <seriesInfo name="DOI" value="10.17487/RFC2119"/>
        </reference>
        <reference anchor="RFC6206" target="https://www.rfc-editor.org/info/rfc6206" quoteTitle="true" derivedAnchor="RFC6206">
          <front>
            <title>The Trickle Algorithm</title>
            <author fullname="P. Levis" initials="P." surname="Levis"/>
            <author fullname="T. Clausen" initials="T." surname="Clausen"/>
            <author fullname="J. Hui" initials="J." surname="Hui"/>
            <author fullname="O. Gnawali" initials="O." surname="Gnawali"/>
            <author fullname="J. Ko" initials="J." surname="Ko"/>
            <date month="March" year="2011"/>
            <abstract>
              <t indent="0">The Trickle algorithm allows nodes in a lossy shared medium (e.g., low-power and lossy networks) to exchange information in a highly robust, energy efficient, simple, and scalable manner. Dynamically adjusting transmission windows allows Trickle to spread new information on the scale of link-layer transmission times while sending only a few messages per hour when information does not change. A simple suppression mechanism and transmission point selection allow Trickle's communication rate to scale logarithmically with density. This document describes the Trickle algorithm and considerations in its use. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6206"/>
          <seriesInfo name="DOI" value="10.17487/RFC6206"/>
        </reference>
        <reference anchor="RFC6550" target="https://www.rfc-editor.org/info/rfc6550" quoteTitle="true" derivedAnchor="RFC6550">
          <front>
            <title>RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks</title>
            <author fullname="T. Winter" initials="T." role="editor" surname="Winter"/>
            <author fullname="P. Thubert" initials="P." role="editor" surname="Thubert"/>
            <author fullname="A. Brandt" initials="A." surname="Brandt"/>
            <author fullname="J. Hui" initials="J." surname="Hui"/>
            <author fullname="R. Kelsey" initials="R." surname="Kelsey"/>
            <author fullname="P. Levis" initials="P." surname="Levis"/>
            <author fullname="K. Pister" initials="K." surname="Pister"/>
            <author fullname="R. Struik" initials="R." surname="Struik"/>
            <author fullname="JP. Vasseur" initials="JP." surname="Vasseur"/>
            <author fullname="R. Alexander" initials="R." surname="Alexander"/>
            <date month="March" year="2012"/>
            <abstract>
              <t indent="0">Low-Power and Lossy Networks (LLNs) are a class of network in which both the routers and their interconnect are constrained. LLN routers typically operate with constraints on processing power, memory, and energy (battery power). Their interconnects are characterized by high loss rates, low data rates, and instability. LLNs are comprised of anything from a few dozen to thousands of routers. Supported traffic flows include point-to-point (between devices inside the LLN), point-to-multipoint (from a central control point to a subset of devices inside the LLN), and multipoint-to-point (from devices inside the LLN towards a central control point). This document specifies the IPv6 Routing Protocol for Low-Power and Lossy Networks (RPL), which provides a mechanism whereby multipoint-to-point traffic from devices inside the LLN towards a central control point as well as point-to-multipoint traffic from the central control point to the devices inside the LLN are supported. Support for point-to-point traffic is also available. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6550"/>
          <seriesInfo name="DOI" value="10.17487/RFC6550"/>
        </reference>
        <reference anchor="RFC6551" target="https://www.rfc-editor.org/info/rfc6551" quoteTitle="true" derivedAnchor="RFC6551">
          <front>
            <title>Routing Metrics Used for Path Calculation in Low-Power and Lossy Networks</title>
            <author fullname="JP. Vasseur" initials="JP." role="editor" surname="Vasseur"/>
            <author fullname="M. Kim" initials="M." role="editor" surname="Kim"/>
            <author fullname="K. Pister" initials="K." surname="Pister"/>
            <author fullname="N. Dejean" initials="N." surname="Dejean"/>
            <author fullname="D. Barthel" initials="D." surname="Barthel"/>
            <date month="March" year="2012"/>
            <abstract>
              <t indent="0">Low-Power and Lossy Networks (LLNs) have unique characteristics compared with traditional wired and ad hoc networks that require the specification of new routing metrics and constraints. By contrast, with typical Interior Gateway Protocol (IGP) routing metrics using hop counts or link metrics, this document specifies a set of link and node routing metrics and constraints suitable to LLNs to be used by the Routing Protocol for Low-Power and Lossy Networks (RPL). [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6551"/>
          <seriesInfo name="DOI" value="10.17487/RFC6551"/>
        </reference>
        <reference anchor="RFC8174" target="https://www.rfc-editor.org/info/rfc8174" quoteTitle="true" derivedAnchor="RFC8174">
          <front>
            <title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
            <author fullname="B. Leiba" initials="B." surname="Leiba"/>
            <date month="May" year="2017"/>
            <abstract>
              <t indent="0">RFC 2119 specifies common key words that may be used in protocol specifications. This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the defined special meanings.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="8174"/>
          <seriesInfo name="DOI" value="10.17487/RFC8174"/>
        </reference>
      </references>
      <references pn="section-11.2">
        <name slugifiedName="name-informative-references">Informative References</name>
        <reference anchor="aodv-tot" target="https://ieeexplore.ieee.org/document/749281" quoteTitle="true" derivedAnchor="aodv-tot">
          <front>
            <title>Ad-hoc On-demand Distance Vector Routing</title>
            <author fullname="C.E. Perkins" initials="C.E." surname="Perkins">
              <organization showOnFrontPage="true">Advanced Development Group, Sun MicroSystems Laboratories, Inc., Menlo Park, CA, USA</organization>
              <address>
            </address>
            </author>
            <author fullname="E.M. Royer" initials="E.M." surname="Royer">
              <organization showOnFrontPage="true">Advanced Development Group, Sun MicroSystems Laboratories, Inc., Menlo Park, CA, USA</organization>
              <address>
            </address>
            </author>
            <date month="Feb" year="1999"/>
          </front>
          <refcontent>Proceedings WMCSA'99. Second IEEE Workshop on Mobile Computing Systems and Applications, pp. 90-100</refcontent>
          <seriesInfo name="DOI" value="10.1109/MCSA.1999.749281"/>
        </reference>
        <reference anchor="co-ioam" target="https://ieeexplore.ieee.org/document/8328276" quoteTitle="true" derivedAnchor="co-ioam">
          <front>
            <title>Co-iOAM: In-situ Telemetry Metadata Transport for Resource Constrained Networks within IETF Standards Framework</title>
            <author fullname="Rashmi Ballamajalu" initials="R." surname="Ballamajalu">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="S.V.R. Anand" initials="S.V.R." surname="Anand">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="Malati Hegde" initials="M." surname="Hegde">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <date month="Jan" year="2018"/>
          </front>
          <refcontent>2018 10th International Conference on Communication Systems &amp; Networks (COMSNETS), pp. 573-576</refcontent>
          <seriesInfo name="DOI" value="10.1109/COMSNETS.2018.8328276"/>
        </reference>
        <reference anchor="contiki" target="https://github.com/contiki-os/contiki" quoteTitle="true" derivedAnchor="contiki">
          <front>
            <title>The Contiki Open Source OS for the Internet of Things (Contiki Version 2.7)</title>
            <author/>
            <date month="Nov" year="2013"/>
          </front>
          <refcontent>commit 7635906</refcontent>
        </reference>
        <reference anchor="Contiki-ng" target="https://github.com/contiki-ng/contiki-ng" quoteTitle="true" derivedAnchor="Contiki-ng">
          <front>
            <title>Contiki-NG: The OS for Next Generation IoT Devices (Contiki-NG Version 4.6)</title>
            <author/>
            <date month="Dec" year="2020"/>
          </front>
          <refcontent>commit 3b0bc6a</refcontent>
        </reference>
        <reference anchor="cooja" target="https://github.com/contiki-os/contiki/tree/master/tools/cooja" quoteTitle="true" derivedAnchor="cooja">
          <front>
            <title>Cooja Simulator for Wireless Sensor Networks (Contiki/Cooja Version 2.7)</title>
            <author/>
            <date month="Nov" year="2013"/>
          </front>
          <refcontent>commit 7635906</refcontent>
        </reference>
        <reference anchor="empirical-study" target="https://ieeexplore.ieee.org/document/6231290" quoteTitle="true" derivedAnchor="empirical-study">
          <front>
            <title>An empirical study of asymmetry in low-power wireless links</title>
            <author fullname="Prasant Misra" initials="P." surname="Misra">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="Nadeem Ahmed" initials="N." surname="Ahmed">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="Sanjay Jha" initials="S." surname="Jha">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <date month="July" year="2012"/>
          </front>
          <refcontent>IEEE Communications Magazine, vol. 50, no. 7, pp. 137-146</refcontent>
          <seriesInfo name="DOI" value="10.1109/MCOM.2012.6231290"/>
        </reference>
        <reference anchor="Link_Asymmetry" target="https://doi.org/10.1145/1689239.1689242" quoteTitle="true" derivedAnchor="Link_Asymmetry">
          <front>
            <title>On Link Asymmetry and One-way Estimation in Wireless Sensor Networks</title>
            <author fullname="Lifeng Sang" initials="L." surname="Sang">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="Anish Arora" initials="A." surname="Arora">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="Hongwei Zhang" initials="H." surname="Zhang">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <date month="March" year="2010"/>
          </front>
          <refcontent>ACM Transactions on Sensor Networks, vol. 6, no. 2, pp. 1-25</refcontent>
          <seriesInfo name="DOI" value="10.1145/1689239.1689242"/>
        </reference>
        <reference anchor="low-power-wireless" target="https://doi.org/10.1145/1689239.1689246" quoteTitle="true" derivedAnchor="low-power-wireless">
          <front>
            <title>An empirical study of low-power wireless</title>
            <author fullname="Kannan Srinivasan" initials="K." surname="Srinivasan">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="Prabal Dutta" initials="P." surname="Dutta">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="Arsalan Tavakoli" initials="A." surname="Tavakoli">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <author fullname="Philip Levis" initials="P" surname="Levis">
              <organization showOnFrontPage="true"></organization>
              <address>
            </address>
            </author>
            <date month="March" year="2010"/>
          </front>
          <refcontent>ACM Transactions on Sensor Networks, vol. 6, no. 2, pp. 1-49</refcontent>
          <seriesInfo name="DOI" value="10.1145/1689239.1689246"/>
        </reference>
        <reference anchor="RFC3561" target="https://www.rfc-editor.org/info/rfc3561" quoteTitle="true" derivedAnchor="RFC3561">
          <front>
            <title>Ad hoc On-Demand Distance Vector (AODV) Routing</title>
            <author fullname="C. Perkins" initials="C." surname="Perkins"/>
            <author fullname="E. Belding-Royer" initials="E." surname="Belding-Royer"/>
            <author fullname="S. Das" initials="S." surname="Das"/>
            <date month="July" year="2003"/>
            <abstract>
              <t indent="0">The Ad hoc On-Demand Distance Vector (AODV) routing protocol is intended for use by mobile nodes in an ad hoc network. It offers quick adaptation to dynamic link conditions, low processing and memory overhead, low network utilization, and determines unicast routes to destinations within the ad hoc network. It uses destination sequence numbers to ensure loop freedom at all times (even in the face of anomalous delivery of routing control messages), avoiding problems (such as "counting to infinity") associated with classical distance vector protocols. This memo defines an Experimental Protocol for the Internet community.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="3561"/>
          <seriesInfo name="DOI" value="10.17487/RFC3561"/>
        </reference>
        <reference anchor="RFC6687" target="https://www.rfc-editor.org/info/rfc6687" quoteTitle="true" derivedAnchor="RFC6687">
          <front>
            <title>Performance Evaluation of the Routing Protocol for Low-Power and Lossy Networks (RPL)</title>
            <author fullname="J. Tripathi" initials="J." role="editor" surname="Tripathi"/>
            <author fullname="J. de Oliveira" initials="J." role="editor" surname="de Oliveira"/>
            <author fullname="JP. Vasseur" initials="JP." role="editor" surname="Vasseur"/>
            <date month="October" year="2012"/>
            <abstract>
              <t indent="0">This document presents a performance evaluation of the Routing Protocol for Low-Power and Lossy Networks (RPL) for a small outdoor deployment of sensor nodes and for a large-scale smart meter network. Detailed simulations are carried out to produce several routing performance metrics using these real-life deployment scenarios. Please refer to the PDF version of this document, which includes several plots for the performance metrics not shown in the plain-text version. This document is not an Internet Standards Track specification; it is published for informational purposes.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6687"/>
          <seriesInfo name="DOI" value="10.17487/RFC6687"/>
        </reference>
        <reference anchor="RFC6997" target="https://www.rfc-editor.org/info/rfc6997" quoteTitle="true" derivedAnchor="RFC6997">
          <front>
            <title>Reactive Discovery of Point-to-Point Routes in Low-Power and Lossy Networks</title>
            <author fullname="M. Goyal" initials="M." role="editor" surname="Goyal"/>
            <author fullname="E. Baccelli" initials="E." surname="Baccelli"/>
            <author fullname="M. Philipp" initials="M." surname="Philipp"/>
            <author fullname="A. Brandt" initials="A." surname="Brandt"/>
            <author fullname="J. Martocci" initials="J." surname="Martocci"/>
            <date month="August" year="2013"/>
            <abstract>
              <t indent="0">This document specifies a point-to-point route discovery mechanism, complementary to the Routing Protocol for Low-power and Lossy Networks (RPL) core functionality. This mechanism allows an IPv6 router to discover "on demand" routes to one or more IPv6 routers in a Low-power and Lossy Network (LLN) such that the discovered routes meet specified metrics constraints.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6997"/>
          <seriesInfo name="DOI" value="10.17487/RFC6997"/>
        </reference>
        <reference anchor="RFC6998" target="https://www.rfc-editor.org/info/rfc6998" quoteTitle="true" derivedAnchor="RFC6998">
          <front>
            <title>A Mechanism to Measure the Routing Metrics along a Point-to-Point Route in a Low-Power and Lossy Network</title>
            <author fullname="M. Goyal" initials="M." role="editor" surname="Goyal"/>
            <author fullname="E. Baccelli" initials="E." surname="Baccelli"/>
            <author fullname="A. Brandt" initials="A." surname="Brandt"/>
            <author fullname="J. Martocci" initials="J." surname="Martocci"/>
            <date month="August" year="2013"/>
            <abstract>
              <t indent="0">This document specifies a mechanism that enables a Routing Protocol for Low-power and Lossy Networks (RPL) router to measure the aggregated values of given routing metrics along an existing route towards another RPL router, thereby allowing the router to decide if it wants to initiate the discovery of a better route.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6998"/>
          <seriesInfo name="DOI" value="10.17487/RFC6998"/>
        </reference>
        <reference anchor="RFC7276" target="https://www.rfc-editor.org/info/rfc7276" quoteTitle="true" derivedAnchor="RFC7276">
          <front>
            <title>An Overview of Operations, Administration, and Maintenance (OAM) Tools</title>
            <author fullname="T. Mizrahi" initials="T." surname="Mizrahi"/>
            <author fullname="N. Sprecher" initials="N." surname="Sprecher"/>
            <author fullname="E. Bellagamba" initials="E." surname="Bellagamba"/>
            <author fullname="Y. Weingarten" initials="Y." surname="Weingarten"/>
            <date month="June" year="2014"/>
            <abstract>
              <t indent="0">Operations, Administration, and Maintenance (OAM) is a general term that refers to a toolset for fault detection and isolation, and for performance measurement. Over the years, various OAM tools have been defined for various layers in the protocol stack.</t>
              <t indent="0">This document summarizes some of the OAM tools defined in the IETF in the context of IP unicast, MPLS, MPLS Transport Profile (MPLS-TP), pseudowires, and Transparent Interconnection of Lots of Links (TRILL). This document focuses on tools for detecting and isolating failures in networks and for performance monitoring. Control and management aspects of OAM are outside the scope of this document. Network repair functions such as Fast Reroute (FRR) and protection switching, which are often triggered by OAM protocols, are also out of the scope of this document.</t>
              <t indent="0">The target audience of this document includes network equipment vendors, network operators, and standards development organizations. This document can be used as an index to some of the main OAM tools defined in the IETF. At the end of the document, a list of the OAM toolsets and a list of the OAM functions are presented as a summary.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7276"/>
          <seriesInfo name="DOI" value="10.17487/RFC7276"/>
        </reference>
        <reference anchor="RFC7416" target="https://www.rfc-editor.org/info/rfc7416" quoteTitle="true" derivedAnchor="RFC7416">
          <front>
            <title>A Security Threat Analysis for the Routing Protocol for Low-Power and Lossy Networks (RPLs)</title>
            <author fullname="T. Tsao" initials="T." surname="Tsao"/>
            <author fullname="R. Alexander" initials="R." surname="Alexander"/>
            <author fullname="M. Dohler" initials="M." surname="Dohler"/>
            <author fullname="V. Daza" initials="V." surname="Daza"/>
            <author fullname="A. Lozano" initials="A." surname="Lozano"/>
            <author fullname="M. Richardson" initials="M." role="editor" surname="Richardson"/>
            <date month="January" year="2015"/>
            <abstract>
              <t indent="0">This document presents a security threat analysis for the Routing Protocol for Low-Power and Lossy Networks (RPLs). The development builds upon previous work on routing security and adapts the assessments to the issues and constraints specific to low-power and lossy networks. A systematic approach is used in defining and evaluating the security threats. Applicable countermeasures are application specific and are addressed in relevant applicability statements.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7416"/>
          <seriesInfo name="DOI" value="10.17487/RFC7416"/>
        </reference>
        <reference anchor="RFC7548" target="https://www.rfc-editor.org/info/rfc7548" quoteTitle="true" derivedAnchor="RFC7548">
          <front>
            <title>Management of Networks with Constrained Devices: Use Cases</title>
            <author fullname="M. Ersue" initials="M." role="editor" surname="Ersue"/>
            <author fullname="D. Romascanu" initials="D." surname="Romascanu"/>
            <author fullname="J. Schoenwaelder" initials="J." surname="Schoenwaelder"/>
            <author fullname="A. Sehgal" initials="A." surname="Sehgal"/>
            <date month="May" year="2015"/>
            <abstract>
              <t indent="0">This document discusses use cases concerning the management of networks in which constrained devices are involved. A problem statement, deployment options, and the requirements on the networks with constrained devices can be found in the companion document on "Management of Networks with Constrained Devices: Problem Statement and Requirements" (RFC 7547).</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7548"/>
          <seriesInfo name="DOI" value="10.17487/RFC7548"/>
        </reference>
        <reference anchor="RFC9010" target="https://www.rfc-editor.org/info/rfc9010" quoteTitle="true" derivedAnchor="RFC9010">
          <front>
            <title>Routing for RPL (Routing Protocol for Low-Power and Lossy Networks) Leaves</title>
            <author fullname="P. Thubert" initials="P." role="editor" surname="Thubert"/>
            <author fullname="M. Richardson" initials="M." surname="Richardson"/>
            <date month="April" year="2021"/>
            <abstract>
              <t indent="0">This specification provides a mechanism for a host that implements a routing-agnostic interface based on IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Neighbor Discovery to obtain reachability services across a network that leverages RFC 6550 for its routing operations. It updates RFCs 6550, 6775, and 8505.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="9010"/>
          <seriesInfo name="DOI" value="10.17487/RFC9010"/>
        </reference>
        <reference anchor="RFC9030" target="https://www.rfc-editor.org/info/rfc9030" quoteTitle="true" derivedAnchor="RFC9030">
          <front>
            <title>An Architecture for IPv6 over the Time-Slotted Channel Hopping Mode of IEEE 802.15.4 (6TiSCH)</title>
            <author fullname="P. Thubert" initials="P." role="editor" surname="Thubert"/>
            <date month="May" year="2021"/>
            <abstract>
              <t indent="0">This document describes a network architecture that provides low-latency, low-jitter, and high-reliability packet delivery. It combines a high-speed powered backbone and subnetworks using IEEE 802.15.4 time-slotted channel hopping (TSCH) to meet the requirements of low-power wireless deterministic applications.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="9030"/>
          <seriesInfo name="DOI" value="10.17487/RFC9030"/>
        </reference>
      </references>
    </references>
    <section anchor="appendix-a" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.a">
      <name slugifiedName="name-example-using-etx-rssi-valu">Example: Using ETX/RSSI Values to Determine Value of S Bit</name>
      <t indent="0" pn="section-appendix.a-1">The combination of the downstream Received Signal Strength Indicator
      (RSSI) and the upstream Expected Transmission Count (ETX) has been
      tested to determine whether a link is symmetric or asymmetric at
      intermediate routers. We present two methods to obtain an ETX value from
      RSSI measurement.</t>
      <dl newline="false" spacing="normal" indent="3" pn="section-appendix.a-2">
        <dt pn="section-appendix.a-2.1">Method 1:</dt>
        <dd pn="section-appendix.a-2.2">
          <t indent="0" pn="section-appendix.a-2.2.1">
	    In the first method, we constructed a table measuring RSSI versus
	    ETX using the Cooja simulation <xref target="cooja" format="default" sectionFormat="of" derivedContent="cooja"/> setup in the
	    Contiki OS environment <xref target="contiki" format="default" sectionFormat="of" derivedContent="contiki"/>. We used
	    Contiki-2.7 running the 6LoWPAN/RPL protocol stack for the
	    simulations.  For approximating the number of packet drops based
	    on the RSSI values, we implemented simple logic that drops
	    transmitted packets with certain predefined ratios before handing
	    over the packets to the receiver. The packet drop ratio is
	    implemented as a table lookup of RSSI ranges mapping to different
	    packet drop ratios with lower RSSI ranges resulting in higher
	    values. While this table has been defined for the purpose of
	    capturing the overall link behavior, in general, it is highly
	    recommended to conduct physical radio measurement experiments.  By
	    keeping the receiving node at different distances, we let the
	    packets experience different packet drops as per the described
	    method. The ETX value computation is done by another module that
	    is part of RPL OF implementation.  Since the ETX
	    value is reflective of the extent of packet drops, it allowed us
	    to prepare a useful table correlating ETX and RSSI values (see
	    <xref target="table_ETX_RSSI" format="default" sectionFormat="of" derivedContent="Table 3"/>).  ETX and RSSI values obtained in this way may be used as
	    explained below:</t>
          <figure anchor="commlink" align="left" suppress-title="false" pn="figure-6">
            <name slugifiedName="name-communication-link-from-sou">Communication Link from Source to Destination</name>
            <artwork align="left" pn="section-appendix.a-2.2.2.1">
Source -------&gt; NodeA -------&gt; NodeB -----&gt; Destination</artwork>
          </figure>
          <table anchor="table_ETX_RSSI" align="center" pn="table-3">
            <name slugifiedName="name-selection-of-s-bit-based-on">Selection of S Bit Based on Expected ETX Value</name>
            <thead>
              <tr>
                <th align="center" colspan="1" rowspan="1">RSSI at NodeA for NodeB</th>
                <th align="center" colspan="1" rowspan="1">Expected ETX at NodeA for NodeB-&gt;NodeA</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="center" colspan="1" rowspan="1">&gt; -60</td>
                <td align="center" colspan="1" rowspan="1">150</td>
              </tr>
              <tr>
                <td align="center" colspan="1" rowspan="1">-70 to -60</td>
                <td align="center" colspan="1" rowspan="1">192</td>
              </tr>
              <tr>
                <td align="center" colspan="1" rowspan="1">-80 to -70</td>
                <td align="center" colspan="1" rowspan="1">226</td>
              </tr>
              <tr>
                <td align="center" colspan="1" rowspan="1">-90 to -80</td>
                <td align="center" colspan="1" rowspan="1">662</td>
              </tr>
              <tr>
                <td align="center" colspan="1" rowspan="1">-100 to -90</td>
                <td align="center" colspan="1" rowspan="1">3840</td>
              </tr>
            </tbody>
          </table>
        </dd>
        <dt pn="section-appendix.a-2.3">Method 2:</dt>
        <dd pn="section-appendix.a-2.4">One could also make use of the function
	    guess_etx_from_rssi() defined in the 6LoWPAN/RPL protocol stack
            of Contiki-ng OS <xref target="Contiki-ng" format="default" sectionFormat="of" derivedContent="Contiki-ng"/> to obtain RSSI-ETX
	    mapping. This function outputs an ETX value ranging between 128
	    and 3840 for -60 &lt;= rssi &lt;= -89. The function description
	    is beyond the scope of this document.
        </dd>
      </dl>
      <t indent="0" pn="section-appendix.a-3"> We tested the operations in this specification by making the
      following experiment, using the above parameters.  In our experiment, a
      communication link is considered as symmetric if the ETX value of
      NodeA-&gt;NodeB and NodeB-&gt;NodeA (see <xref target="commlink" format="default" sectionFormat="of" derivedContent="Figure 6"/>) are
      within, say, a 1:3 ratio.  This ratio should be understood as
      determining the link's symmetric/asymmetric nature.  NodeA can typically
      know the ETX value in the direction of NodeA-&gt;NodeB, but it has no
      direct way of knowing the value of ETX from NodeB-&gt;NodeA.  Using
      physical testbed experiments and realistic wireless channel propagation
      models, one can determine a relationship between RSSI and ETX
      representable as an expression or a mapping table.  Such a relationship,
      in turn, can be used to estimate the ETX value at NodeA for link
      NodeB-&gt;NodeA from the received RSSI from NodeB.  Whenever NodeA
      determines that the link towards the NodeB is bidirectional asymmetric,
      then the S bit is set to 0.  Afterwards, the link from NodeA to
      Destination remains designated as asymmetric, and the S bit remains set
      to 0.
      </t>
      <t indent="0" pn="section-appendix.a-4">Determination of asymmetry versus bidirectionality remains a topic
	of lively discussion in the IETF.
      </t>
    </section>
    <section anchor="Examples" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b">
      <name slugifiedName="name-some-example-aodv-rpl-messa">Some Example AODV-RPL Message Flows</name>
      <t indent="0" pn="section-appendix.b-1">
	This appendix provides some example message flows showing
        RREQ and RREP establishing symmetric and asymmetric routes.
	Also, examples for the use of RREP_WAIT and G-RREP are included.
        In the examples, router (O) is to be understood as performing
        the role of OrigNode.  Router (T) is to be understood as performing
	the role of TargNode.  Routers (R) are intermediate routers that
        are performing AODV-RPL functions in order to discover one or more
        suitable routes between (O) and (T).
      </t>
      <section anchor="Asymmetric-examples" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b.1">
        <name slugifiedName="name-example-control-message-flo">Example Control Message Flows in Symmetric and Asymmetric Networks</name>
        <t indent="0" pn="section-appendix.b.1-1">
	In the following diagram, RREQ messages are multicast from router (O)
	in order to discover routes to and from router (T).  The RREQ control
        messages flow outward from (O).  Each router along the way establishes
        a single RREQ-Instance identified by RREQ-InstanceID even if multiple
        RREQs are received with the same RREQ-InstanceID.  In the top half of
        the diagram, the routers are able to offer a symmetric route at each
        hop of the path from (O) to (T).  When (T) receives an RREQ, it is
        then able to transmit data packets to (O).  Router (T) then prepares
        to send an RREP along the symmetric path that would enable router (O)
        to send packets to router (T).

        </t>
        <figure anchor="figSymm-RREQ_flow" align="left" suppress-title="false" pn="figure-7">
          <name slugifiedName="name-aodv-rpl-rreq-message-flow-">AODV-RPL RREQ Message Flow Example When Symmetric Path Available</name>
          <artwork align="center" pn="section-appendix.b.1-2.1">
             (R) ---RREQ(S=1)---&gt;(R) ---RREQ(S=1)---&gt;(R)
              ^                                       |
              |                                       |
         RREQ(S=1)                                RREQ(S=1)
              |                                       |
              |                                       v
             (O) ---------&gt;(R) ---------&gt;(R)--------&gt;(T)
             / \    RREQ         RREQ         RREQ    ^
             |  \    (S=1)      (S=0)         (S=0)   |
             |   \                                   /
        RREQ |    \ RREQ (S=1)                    RREQ (S=0)
       (S=0) |     \                               /
             v      \              RREQ (S=0)     /
            (R) ----&gt;(R)------&gt;(R)----.....---&gt;(R)</artwork>
        </figure>
        <t indent="0" pn="section-appendix.b.1-3">
	In the following diagram, which results from the above RREQ message
        transmission, a symmetric route is available from (T) to router (O)
        via the routers in the top half of the diagram.  RREP messages are
        sent via unicast along the symmetric route.  Since the RREP message
        is transmitted via unicast, no RREP messages are sent by router (T)
        to the routers in the bottom half of the diagram.

        </t>
        <figure anchor="figSymm-RREP_flow" align="left" suppress-title="false" pn="figure-8">
          <name slugifiedName="name-aodv-rpl-rrep-message-flow-">AODV-RPL RREP Message Flow Example When Symmetric Path Available</name>
          <artwork align="center" pn="section-appendix.b.1-4.1">
             (R)&lt;------RREP----- (R)&lt;------RREP----- (R)
              |                                       ^
              |                                       |
             RREP                                    RREP
              |                                       |
              v                                       |
             (O) ----------(R) ----------(R) --------(T)
             / \                                      |
             |  \                                     |
             |   \     (no RREP messages sent)       /
             |    \                                 /
             |     \                               /
             |      \                             /
            (R) -----(R)-------(R)----.....----(R)</artwork>
        </figure>
        <t indent="0" pn="section-appendix.b.1-5">
	In the following diagram, RREQ messages are multicast from router (O)
        in order to discover routes to and from router (T) as before. As shown,
        no symmetric route is available from (O) to (T).

        </t>
        <figure anchor="figAsymm-RREQ_flow" align="left" suppress-title="false" pn="figure-9">
          <name slugifiedName="name-aodv-rpl-rreq-message-flow-w">AODV-RPL RREQ Message Flow When Symmetric Path Unavailable</name>
          <artwork align="center" pn="section-appendix.b.1-6.1">
             (R) ---RREQ(S=0)---&gt;(R) ---RREQ(S=0)---&gt;(R)
              ^                                       |
              |                                       |
          RREQ(S=1)                                RREQ(S=0)
              |                                       |
              |                                       v
             (O) ---------&gt;(R) ---------&gt;(R)--------&gt;(T)
             ^ \    RREQ         RREQ      RREQ      |  \
             |  \    (S=1)        (S=0)       (S=0)  |   |
             |   \                                   /   |
             |  RREQ (S=1)              RREQ (S=0)  /   (R)
             |     \                               /     |
             |      \               RREQ (S=0)    /     /
            (R) ----&gt;(R)------&gt;(R)----.....-----&gt;(R)---</artwork>
        </figure>
        <t indent="0" pn="section-appendix.b.1-7">
	Upon receiving the RREQ in <xref target="figAsymm-RREQ_flow" format="default" sectionFormat="of" derivedContent="Figure 9"/>,
	router (T) then prepares to send an RREP that would enable router (O)
        to send packets to router (T). In <xref target="figAsymm-RREQ_flow" format="default" sectionFormat="of" derivedContent="Figure 9"/>,
	since no symmetric route is available from (T) to router (O),
        RREP messages are sent via multicast to all neighboring routers.

        </t>
        <figure anchor="figAsymm-RREP_flow" align="left" suppress-title="false" pn="figure-10">
          <name slugifiedName="name-aodv-rpl-rreq-and-rrep-inst">AODV-RPL RREQ and RREP-Instances for Asymmetric Links</name>
          <artwork align="center" pn="section-appendix.b.1-8.1">
             (R)&lt;------RREP----- (R)&lt;------RREP----- (R)
              |                                       |
              |                                       |
             RREP                                    RREP
              |                                       |
              |                                       |
              v                                       v
             (O)&lt;--------- (R)&lt;--------- (R)&lt;------- (T)
             ^ \    RREP         RREP        RREP    |  \
             |  \                                    |   |RREP
             |   \                                   /   |
       RREP  |    \ RREP                  RREP      /   (R)
             |     \                               /     |
             |      \                             /     /
           (R)&lt;----- (R)&lt;----- (R)&lt;---.....---- (R)&lt; - RREP
                RREP       RREP         RREP</artwork>
        </figure>
      </section>
      <section anchor="RREP_WAIT-example" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b.2">
        <name slugifiedName="name-example-rrep_wait-handling">Example RREP_WAIT Handling</name>
        <t indent="0" pn="section-appendix.b.2-1">
        In <xref target="fig-RREP_WAIT-a" format="default" sectionFormat="of" derivedContent="Figure 11"/>, the first RREQ arrives at (T).
        This triggers TargNode to start the RREP_WAIT_TIME timer.

        </t>
        <figure anchor="fig-RREP_WAIT-a" align="left" suppress-title="false" pn="figure-11">
          <name slugifiedName="name-targnode-starts-rrep_wait">TargNode Starts RREP_WAIT</name>
          <artwork align="center" pn="section-appendix.b.2-2.1">
        (O) ---------&gt;(R) ---------&gt;(R)--------&gt;(T)
                RREQ         RREQ         RREQ
               (S=1)        (S=0)        (S=0)</artwork>
        </figure>
        <t indent="0" pn="section-appendix.b.2-3">

        In <xref target="fig-RREP_WAIT-b" format="default" sectionFormat="of" derivedContent="Figure 12"/>, another RREQ arrives
        before the RREP_WAIT_TIME timer is expired.  It could be preferable
        compared the previously received RREP that caused the
        RREP_WAIT_TIME timer to be set.

        </t>
        <figure anchor="fig-RREP_WAIT-b" align="left" suppress-title="false" pn="figure-12">
          <name slugifiedName="name-waiting-targnode-receives-p">Waiting TargNode Receives Preferable RREQ</name>
          <artwork align="center" pn="section-appendix.b.2-4.1">
        (O)                                     (T)
        / \                                      ^
        |  \                                     |
        |   \                                   /
   RREQ |    \ RREQ (S=1)                    RREQ (S=0)
  (S=0) |     \                               /
        v      \              RREQ (S=0)     /
       (R) ----&gt;(R)------&gt;(R)----.....---&gt;(R)</artwork>
        </figure>
        <t indent="0" pn="section-appendix.b.2-5">

        In <xref target="fig-RREP_WAIT-c" format="default" sectionFormat="of" derivedContent="Figure 13"/>, the RREP_WAIT_TIME timer
        expires. TargNode selects the path with S=1.

        </t>
        <figure anchor="fig-RREP_WAIT-c" align="left" suppress-title="false" pn="figure-13">
          <name slugifiedName="name-rrep_wait-expires-at-targno">RREP_WAIT Expires at TargNode</name>
          <artwork align="center" pn="section-appendix.b.2-6.1">
        (R) ---RREQ(S=1)---&gt;(R) ---RREQ(S=1)---&gt;(R)
         ^                                       |
         |                                       |
    RREQ(S=1)                                RREQ(S=1)
         |                                       |
         |                                       v
        (O)                                     (T)</artwork>
        </figure>
      </section>
      <section anchor="G-RREP-example" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b.3">
        <name slugifiedName="name-example-g-rrep-handling">Example G-RREP Handling</name>
        <t indent="0" pn="section-appendix.b.3-1">In <xref target="fig-G-RREP-a" format="default" sectionFormat="of" derivedContent="Figure 14"/>, R* has upward and downward routes
        to TargNode (T) that satisfy the OF of the RPL Instance originated
        by OrigNode (O), and the Destination Sequence Number is at least as large
        as the Sequence Number in the RREQ message.</t>
        <figure anchor="fig-G-RREP-a" align="left" suppress-title="false" pn="figure-14">
          <name slugifiedName="name-rrep-triggers-g-rrep-at-int">RREP Triggers G-RREP at Intermediate Node</name>
          <artwork align="center" pn="section-appendix.b.3-2.1">
        (R) ---RREQ(S=1)---&gt;(R) ---RREQ(S=0)---&gt;(R)
         ^                                       |
         |                                       |
    RREQ(S=1)                                RREQ(S=0)
         |                                       |
         |                                       v
        (O) ---------&gt;(R) ---------&gt;(R)--------&gt;(T)
        / \    RREQ         RREQ         RREQ    ^
        |  \    (S=1)      (S=0)         (S=0)   |
        |   \                                   /
   RREQ |    \ RREQ (S=1)                      /
  (S=0) |     \                               /
        v      \                             v
       (R) ----&gt;(R*)&lt;------&gt;(R)&lt;----....---&gt;(R)</artwork>
        </figure>
        <t indent="0" pn="section-appendix.b.3-3">
        In <xref target="fig-G-RREP-b" format="default" sectionFormat="of" derivedContent="Figure 15"/>, R* transmits the G-RREP-DIO
        back to OrigNode (O) and forwards the incoming RREQ towards (T).

        </t>
        <figure anchor="fig-G-RREP-b" align="left" suppress-title="false" pn="figure-15">
          <name slugifiedName="name-intermediate-node-initiates">Intermediate Node Initiates G-RREP</name>
          <artwork align="center" pn="section-appendix.b.3-4.1">
        (O)                                     (T)
          \                                      ^
           \                                     |
            \                            (RREQ) /
             \ G-RREP-DIO                      /
              \                               /
               \   (RREQ)       (RREQ)       /
               (R*)------&gt;(R)----....---&gt;(R)</artwork>
        </figure>
      </section>
    </section>
    <section numbered="false" removeInRFC="false" toc="include" pn="section-appendix.c">
      <name slugifiedName="name-acknowledgements">Acknowledgements</name>
      <t indent="0" pn="section-appendix.c-1">The authors thank <contact fullname="Pascal Thubert"/>, <contact fullname="Rahul Jadhav"/>, and <contact fullname="Lijo Thomas"/> for
      their support and valuable input.  The authors specially thank <contact fullname="Lavanya H.M."/> for implementing AODV-RPL in Contiki and
      conducting extensive simulation studies.</t>
      <t indent="0" pn="section-appendix.c-2"> The authors would like to acknowledge the reviews, feedback, and
      comments from the following people, in alphabetical order: <contact fullname="Roman Danyliw"/>, <contact fullname="Lars Eggert"/>, <contact fullname="Benjamin Kaduk"/>, <contact fullname="Tero Kivinen"/>,
      <contact fullname="Erik Kline"/>, <contact fullname="Murray       Kucherawy"/>, <contact fullname="Warren Kumari"/>, <contact fullname="Francesca Palombini"/>, <contact fullname="Alvaro Retana"/>,
      <contact fullname="Ines Robles"/>, <contact fullname="John Scudder"/>,
      <contact fullname="Meral Shirazipour"/>, <contact fullname="Peter Van       der Stok"/>, <contact fullname="Éric Vyncke"/>, and <contact fullname="Robert Wilton"/>.</t>
    </section>
    <section numbered="false" removeInRFC="false" toc="include" pn="section-appendix.d">
      <name slugifiedName="name-contributors">Contributors</name>
      <contact fullname="Abdur Rashid Sangi">
        <organization showOnFrontPage="true">Wenzhou-Kean University</organization>
        <address>
          <postal>
            <postalLine>88 Daxue Rd, Ouhai</postalLine>
            <postalLine>Wenzhou</postalLine>
            <postalLine>Zhejiang Province, 325060</postalLine>
            <postalLine>China</postalLine>
            <postalLine>Kean University</postalLine>
            <postalLine>1000 Morris Avenue</postalLine>
            <postalLine>Union, New Jersey 07083</postalLine>
            <postalLine>United States of America</postalLine>
          </postal>
          <email>sangi_bahrian@yahoo.com</email>
        </address>
      </contact>
      <contact fullname="Malati Hegde">
        <organization showOnFrontPage="true">Indian Institute of Science</organization>
        <address>
          <postal>
            <city>Bangalore</city>
            <code>560012</code>
            <country>India</country>
          </postal>
          <email>malati@iisc.ac.in</email>
        </address>
      </contact>
      <contact fullname="Mingui Zhang">
        <organization showOnFrontPage="true">Huawei Technologies</organization>
        <address>
          <postal>
            <street>No. 156 Beiqing Rd.</street>
            <cityarea>Haidian District</cityarea>
            <city>Beijing</city>
            <code>100095</code>
            <country>China</country>
          </postal>
          <email>zhangmingui@huawei.com</email>
        </address>
      </contact>
    </section>
    <section anchor="authors-addresses" numbered="false" removeInRFC="false" toc="include" pn="section-appendix.e">
      <name slugifiedName="name-authors-addresses">Authors' Addresses</name>
      <author fullname="Charles E. Perkins" initials="C.E." surname="Perkins">
        <organization showOnFrontPage="true">Blue Meadow Networks</organization>
        <address>
          <postal>
            <city>Saratoga</city>
            <region>CA</region>
            <code>95070</code>
            <country>United States of America</country>
          </postal>
          <email>charliep@lupinlodge.com</email>
        </address>
      </author>
      <author fullname="S.V.R. Anand" initials="S.V.R." surname="Anand">
        <organization showOnFrontPage="true">Indian Institute of Science</organization>
        <address>
          <postal>
            <city>Bangalore</city>
            <code>560012</code>
            <country>India</country>
          </postal>
          <email>anandsvr@iisc.ac.in</email>
        </address>
      </author>
      <author fullname="Satish Anamalamudi" initials="S." surname="Anamalamudi">
        <organization showOnFrontPage="true">SRM University-AP</organization>
        <address>
          <postal>
            <street>Amaravati Campus</street>
            <city>Amaravati, Andhra Pradesh</city>
            <code>522 502</code>
            <country>India</country>
          </postal>
          <email>satishnaidu80@gmail.com</email>
        </address>
      </author>
      <author fullname="Bing Liu" initials="B." surname="Liu">
        <organization showOnFrontPage="true">Huawei Technologies</organization>
        <address>
          <postal>
            <street>No. 156 Beiqing Rd.</street>
            <cityarea>Haidian District</cityarea>
            <city>Beijing</city>
            <code>100095</code>
            <country>China</country>
          </postal>
          <email>remy.liubing@huawei.com</email>
        </address>
      </author>
    </section>
  </back>
</rfc>
